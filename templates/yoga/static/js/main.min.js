!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],factory):factory(global.jQuery)}(this,function($){"use strict";$=$&&$.hasOwnProperty("default")?$.default:$;var DEFAULTS={autoShow:!1,autoHide:!1,autoPick:!1,inline:!1,container:null,trigger:null,language:"",format:"mm/dd/yyyy",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",highlightedClass:"highlighted",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},WINDOW="undefined"!=typeof window?window:{},NAMESPACE="datepicker",EVENT_CLICK="click.datepicker",CLASS_HIDE="datepicker-hide",LANGUAGES={},VIEWS_DAYS=0,VIEWS_MONTHS=1,VIEWS_YEARS=2,toString=Object.prototype.toString;function isString(value){return"string"==typeof value}var isNaN=Number.isNaN||WINDOW.isNaN;function isNumber(value){return"number"==typeof value&&!isNaN(value)}function isUndefined(value){return void 0===value}function isDate(value){return"date"===(obj=value,toString.call(obj).slice(8,-1).toLowerCase());var obj}function proxy(fn,context){for(var _len=arguments.length,args=Array(2<_len?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];return function(){for(var _len2=arguments.length,args2=Array(_len2),_key2=0;_key2<_len2;_key2++)args2[_key2]=arguments[_key2];return fn.apply(context,args.concat(args2))}}function selectorOf(view){return'[data-view="'+view+'"]'}function getDaysInMonth(year,month){return[31,function(year){return year%4==0&&year%100!=0||year%400==0}(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]}function getMinDay(year,month,day){return Math.min(day,getDaysInMonth(year,month))}var formatParts=/(y|m|d)+/g;var REGEXP_DIGITS=/\d+/g,methods={show:function(){this.built||this.build(),this.shown||this.trigger("show.datepicker").isDefaultPrevented()||(this.shown=!0,this.$picker.removeClass(CLASS_HIDE).on(EVENT_CLICK,$.proxy(this.click,this)),this.showView(this.options.startView),this.inline||($(window).on("resize.datepicker",this.onResize=proxy(this.place,this)),$(document).on(EVENT_CLICK,this.onGlobalClick=proxy(this.globalClick,this)),$(document).on("keyup.datepicker",this.onGlobalKeyup=proxy(this.globalKeyup,this)),this.place()))},hide:function(){this.shown&&(this.trigger("hide.datepicker").isDefaultPrevented()||(this.shown=!1,this.$picker.addClass(CLASS_HIDE).off(EVENT_CLICK,this.click),this.inline||($(window).off("resize.datepicker",this.onResize),$(document).off(EVENT_CLICK,this.onGlobalClick),$(document).off("keyup.datepicker",this.onGlobalKeyup))))},toggle:function(){this.shown?this.hide():this.show()},update:function(){var value=this.getValue();value!==this.oldValue&&(this.setDate(value,!0),this.oldValue=value)},pick:function(_view){var $this=this.$element,date=this.date;this.trigger("pick.datepicker",{view:_view||"",date:date}).isDefaultPrevented()||(date=this.formatDate(this.date),this.setValue(date),this.isInput&&($this.trigger("input"),$this.trigger("change")))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.shown&&this.showView(this.options.startView)},getMonthName:function(month,short){var options=this.options,monthsShort=options.monthsShort,months=options.months;return $.isNumeric(month)?month=Number(month):isUndefined(short)&&(short=month),!0===short&&(months=monthsShort),months[isNumber(month)?month:this.date.getMonth()]},getDayName:function(day,short,min){var options=this.options,days=options.days;return $.isNumeric(day)?day=Number(day):(isUndefined(min)&&(min=short),isUndefined(short)&&(short=day)),min?days=options.daysMin:short&&(days=options.daysShort),days[isNumber(day)?day:this.date.getDay()]},getDate:function(formatted){var date=this.date;return formatted?this.formatDate(date):new Date(date)},setDate:function(date,_updated){var filter=this.options.filter;if(isDate(date)||isString(date)){if(date=this.parseDate(date),$.isFunction(filter)&&!1===filter.call(this.$element,date))return;this.date=date,this.viewDate=new Date(date),_updated||this.pick(),this.built&&this.render()}},setStartDate:function(date){(isDate(date)||isString(date))&&(this.startDate=this.parseDate(date),this.built&&this.render())},setEndDate:function(date){(isDate(date)||isString(date))&&(this.endDate=this.parseDate(date),this.built&&this.render())},parseDate:function(date){var format=this.format,parts=[];if(isDate(date))return new Date(date.getFullYear(),date.getMonth(),date.getDate());isString(date)&&(parts=date.match(REGEXP_DIGITS)||[]),date=new Date;var length=format.parts.length,year=date.getFullYear(),day=date.getDate(),month=date.getMonth();return parts.length===length&&$.each(parts,function(i,part){var value=parseInt(part,10)||1;switch(format.parts[i]){case"dd":case"d":day=value;break;case"mm":case"m":month=value-1;break;case"yy":year=2e3+value;break;case"yyyy":year=value}}),new Date(year,month,day)},formatDate:function(date){var format=this.format,formatted="";if(isDate(date)){var year=date.getFullYear(),values={d:date.getDate(),m:date.getMonth()+1,yy:year.toString().substring(2),yyyy:year};values.dd=(values.d<10?"0":"")+values.d,values.mm=(values.m<10?"0":"")+values.m,formatted=format.source,$.each(format.parts,function(i,part){formatted=formatted.replace(part,values[part])})}return formatted},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(NAMESPACE)}},handlers={click:function(e){var $target=$(e.target),options=this.options,viewDate=this.viewDate,format=this.format;if(e.stopPropagation(),e.preventDefault(),!$target.hasClass("disabled")){var view=$target.data("view"),viewYear=viewDate.getFullYear(),viewMonth=viewDate.getMonth(),viewDay=viewDate.getDate();switch(view){case"years prev":case"years next":viewYear="years prev"===view?viewYear-10:viewYear+10,this.viewDate=new Date(viewYear,viewMonth,getMinDay(viewYear,viewMonth,viewDay)),this.renderYears();break;case"year prev":case"year next":viewYear="year prev"===view?viewYear-1:viewYear+1,this.viewDate=new Date(viewYear,viewMonth,getMinDay(viewYear,viewMonth,viewDay)),this.renderMonths();break;case"year current":format.hasYear&&this.showView(VIEWS_YEARS);break;case"year picked":format.hasMonth?this.showView(VIEWS_MONTHS):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("year");break;case"year":viewYear=parseInt($target.text(),10),this.date=new Date(viewYear,viewMonth,getMinDay(viewYear,viewMonth,viewDay)),format.hasMonth?(this.viewDate=new Date(this.date),this.showView(VIEWS_MONTHS)):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("year");break;case"month prev":case"month next":(viewMonth="month prev"===view?viewMonth-1:viewMonth+1)<0?(viewYear-=1,viewMonth+=12):11<viewMonth&&(viewYear+=1,viewMonth-=12),this.viewDate=new Date(viewYear,viewMonth,getMinDay(viewYear,viewMonth,viewDay)),this.renderDays();break;case"month current":format.hasMonth&&this.showView(VIEWS_MONTHS);break;case"month picked":format.hasDay?this.showView(VIEWS_DAYS):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("month");break;case"month":viewMonth=$.inArray($target.text(),options.monthsShort),this.date=new Date(viewYear,viewMonth,getMinDay(viewYear,viewMonth,viewDay)),format.hasDay?(this.viewDate=new Date(viewYear,viewMonth,getMinDay(viewYear,viewMonth,viewDay)),this.showView(VIEWS_DAYS)):($target.addClass(options.pickedClass).siblings().removeClass(options.pickedClass),this.hideView()),this.pick("month");break;case"day prev":case"day next":case"day":"day prev"===view?viewMonth-=1:"day next"===view&&(viewMonth+=1),viewDay=parseInt($target.text(),10),this.date=new Date(viewYear,viewMonth,viewDay),this.viewDate=new Date(viewYear,viewMonth,viewDay),this.renderDays(),"day"===view&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}}},globalClick:function(_ref){for(var target=_ref.target,element=this.element,trigger=this.$trigger[0],hidden=!0;target!==document;){if(target===trigger||target===element){hidden=!1;break}target=target.parentNode}hidden&&this.hide()},keyup:function(){this.update()},globalKeyup:function(_ref2){var target=_ref2.target,key=_ref2.key,keyCode=_ref2.keyCode;this.isInput&&target!==this.element&&this.shown&&("Tab"===key||9===keyCode)&&this.hide()}},render={render:function(){this.renderYears(),this.renderMonths(),this.renderDays()},renderWeek:function(){var _this=this,items=[],_options=this.options,weekStart=_options.weekStart,daysMin=_options.daysMin;weekStart=parseInt(weekStart,10)%7,daysMin=daysMin.slice(weekStart).concat(daysMin.slice(0,weekStart)),$.each(daysMin,function(i,day){items.push(_this.createItem({text:day}))}),this.$week.html(items.join(""))},renderYears:function(){var options=this.options,startDate=this.startDate,endDate=this.endDate,disabledClass=options.disabledClass,filter=options.filter,yearSuffix=options.yearSuffix,viewYear=this.viewDate.getFullYear(),thisYear=(new Date).getFullYear(),year=this.date.getFullYear(),items=[],prevDisabled=!1,nextDisabled=!1,i=void 0;for(i=-5;i<=6;i+=1){var date=new Date(viewYear+i,1,1),disabled=!1;startDate&&(disabled=date.getFullYear()<startDate.getFullYear(),-5===i&&(prevDisabled=disabled)),!disabled&&endDate&&(disabled=date.getFullYear()>endDate.getFullYear(),6===i&&(nextDisabled=disabled)),!disabled&&filter&&(disabled=!1===filter.call(this.$element,date));var picked=viewYear+i===year,view=picked?"year picked":"year";items.push(this.createItem({picked:picked,disabled:disabled,text:viewYear+i,view:disabled?"year disabled":view,highlighted:date.getFullYear()===thisYear}))}this.$yearsPrev.toggleClass(disabledClass,prevDisabled),this.$yearsNext.toggleClass(disabledClass,nextDisabled),this.$yearsCurrent.toggleClass(disabledClass,!0).html(viewYear+-5+yearSuffix+" - "+(viewYear+6)+yearSuffix),this.$years.html(items.join(""))},renderMonths:function(){var options=this.options,startDate=this.startDate,endDate=this.endDate,viewDate=this.viewDate,disabledClass=options.disabledClass||"",months=options.monthsShort,filter=$.isFunction(options.filter)&&options.filter,viewYear=viewDate.getFullYear(),now=new Date,thisYear=now.getFullYear(),thisMonth=now.getMonth(),year=this.date.getFullYear(),month=this.date.getMonth(),items=[],prevDisabled=!1,nextDisabled=!1,i=void 0;for(i=0;i<=11;i+=1){var date=new Date(viewYear,i,1),disabled=!1;startDate&&(disabled=(prevDisabled=date.getFullYear()===startDate.getFullYear())&&date.getMonth()<startDate.getMonth()),!disabled&&endDate&&(disabled=(nextDisabled=date.getFullYear()===endDate.getFullYear())&&date.getMonth()>endDate.getMonth()),!disabled&&filter&&(disabled=!1===filter.call(this.$element,date));var picked=viewYear===year&&i===month,view=picked?"month picked":"month";items.push(this.createItem({disabled:disabled,picked:picked,highlighted:viewYear===thisYear&&date.getMonth()===thisMonth,index:i,text:months[i],view:disabled?"month disabled":view}))}this.$yearPrev.toggleClass(disabledClass,prevDisabled),this.$yearNext.toggleClass(disabledClass,nextDisabled),this.$yearCurrent.toggleClass(disabledClass,prevDisabled&&nextDisabled).html(viewYear+options.yearSuffix||""),this.$months.html(items.join(""))},renderDays:function(){var $element=this.$element,options=this.options,startDate=this.startDate,endDate=this.endDate,viewDate=this.viewDate,currentDate=this.date,disabledClass=options.disabledClass,filter=options.filter,monthsShort=options.monthsShort,weekStart=options.weekStart,yearSuffix=options.yearSuffix,viewYear=viewDate.getFullYear(),viewMonth=viewDate.getMonth(),now=new Date,thisYear=now.getFullYear(),thisMonth=now.getMonth(),thisDay=now.getDate(),year=currentDate.getFullYear(),month=currentDate.getMonth(),day=currentDate.getDate(),length=void 0,i=void 0,n=void 0,prevItems=[],prevViewYear=viewYear,prevViewMonth=viewMonth,prevDisabled=!1;0===viewMonth?(prevViewYear-=1,prevViewMonth=11):prevViewMonth-=1,length=getDaysInMonth(prevViewYear,prevViewMonth);var firstDay=new Date(viewYear,viewMonth,1);for((n=firstDay.getDay()-parseInt(weekStart,10)%7)<=0&&(n+=7),startDate&&(prevDisabled=firstDay.getTime()<=startDate.getTime()),i=length-(n-1);i<=length;i+=1){var prevViewDate=new Date(prevViewYear,prevViewMonth,i),disabled=!1;startDate&&(disabled=prevViewDate.getTime()<startDate.getTime()),!disabled&&filter&&(disabled=!1===filter.call($element,prevViewDate)),prevItems.push(this.createItem({disabled:disabled,highlighted:prevViewYear===thisYear&&prevViewMonth===thisMonth&&prevViewDate.getDate()===thisDay,muted:!0,picked:prevViewYear===year&&prevViewMonth===month&&i===day,text:i,view:"day prev"}))}var nextItems=[],nextViewYear=viewYear,nextViewMonth=viewMonth,nextDisabled=!1;11===viewMonth?(nextViewYear+=1,nextViewMonth=0):nextViewMonth+=1,length=getDaysInMonth(viewYear,viewMonth),n=42-(prevItems.length+length);var lastDate=new Date(viewYear,viewMonth,length);for(endDate&&(nextDisabled=lastDate.getTime()>=endDate.getTime()),i=1;i<=n;i+=1){var date=new Date(nextViewYear,nextViewMonth,i),picked=nextViewYear===year&&nextViewMonth===month&&i===day,_disabled=!1;endDate&&(_disabled=date.getTime()>endDate.getTime()),!_disabled&&filter&&(_disabled=!1===filter.call($element,date)),nextItems.push(this.createItem({disabled:_disabled,picked:picked,highlighted:nextViewYear===thisYear&&nextViewMonth===thisMonth&&date.getDate()===thisDay,muted:!0,text:i,view:"day next"}))}var items=[];for(i=1;i<=length;i+=1){var _date=new Date(viewYear,viewMonth,i),_disabled2=!1;startDate&&(_disabled2=_date.getTime()<startDate.getTime()),!_disabled2&&endDate&&(_disabled2=_date.getTime()>endDate.getTime()),!_disabled2&&filter&&(_disabled2=!1===filter.call($element,_date));var _picked=viewYear===year&&viewMonth===month&&i===day,view=_picked?"day picked":"day";items.push(this.createItem({disabled:_disabled2,picked:_picked,highlighted:viewYear===thisYear&&viewMonth===thisMonth&&_date.getDate()===thisDay,text:i,view:_disabled2?"day disabled":view}))}this.$monthPrev.toggleClass(disabledClass,prevDisabled),this.$monthNext.toggleClass(disabledClass,nextDisabled),this.$monthCurrent.toggleClass(disabledClass,prevDisabled&&nextDisabled).html(options.yearFirst?viewYear+yearSuffix+" "+monthsShort[viewMonth]:monthsShort[viewMonth]+" "+viewYear+yearSuffix),this.$days.html(prevItems.join("")+items.join("")+nextItems.join(""))}},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var CLASS_TOP_LEFT="datepicker-top-left",CLASS_BOTTOM_LEFT="datepicker-bottom-left",CLASS_PLACEMENTS=[CLASS_TOP_LEFT,"datepicker-top-right",CLASS_BOTTOM_LEFT,"datepicker-bottom-right"].join(" "),Datepicker=function(){function Datepicker(element){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Datepicker),this.$element=$(element),this.element=element,this.options=$.extend({},DEFAULTS,LANGUAGES[options.language],options),this.built=!1,this.shown=!1,this.isInput=!1,this.inline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}return _createClass(Datepicker,[{key:"init",value:function(){var $this=this.$element,options=this.options,startDate=options.startDate,endDate=options.endDate,date=options.date;this.$trigger=$(options.trigger),this.isInput=$this.is("input")||$this.is("textarea"),this.inline=options.inline&&(options.container||!this.isInput),this.format=function(format){var source=String(format).toLowerCase(),parts=source.match(formatParts);if(!parts||0===parts.length)throw new Error("Invalid date format.");return format={source:source,parts:parts},$.each(parts,function(i,part){switch(part){case"dd":case"d":format.hasDay=!0;break;case"mm":case"m":format.hasMonth=!0;break;case"yyyy":case"yy":format.hasYear=!0}}),format}(options.format);var initialValue=this.getValue();this.initialValue=initialValue,this.oldValue=initialValue,date=this.parseDate(date||initialValue),startDate&&(startDate=this.parseDate(startDate),date.getTime()<startDate.getTime()&&(date=new Date(startDate)),this.startDate=startDate),endDate&&(endDate=this.parseDate(endDate),startDate&&endDate.getTime()<startDate.getTime()&&(endDate=new Date(startDate)),date.getTime()>endDate.getTime()&&(date=new Date(endDate)),this.endDate=endDate),this.date=date,this.viewDate=new Date(date),this.initialDate=new Date(this.date),this.bind(),(options.autoShow||this.inline)&&this.show(),options.autoPick&&this.pick()}},{key:"build",value:function(){if(!this.built){this.built=!0;var $this=this.$element,options=this.options,$picker=$(options.template);this.$picker=$picker,this.$week=$picker.find(selectorOf("week")),this.$yearsPicker=$picker.find(selectorOf("years picker")),this.$yearsPrev=$picker.find(selectorOf("years prev")),this.$yearsNext=$picker.find(selectorOf("years next")),this.$yearsCurrent=$picker.find(selectorOf("years current")),this.$years=$picker.find(selectorOf("years")),this.$monthsPicker=$picker.find(selectorOf("months picker")),this.$yearPrev=$picker.find(selectorOf("year prev")),this.$yearNext=$picker.find(selectorOf("year next")),this.$yearCurrent=$picker.find(selectorOf("year current")),this.$months=$picker.find(selectorOf("months")),this.$daysPicker=$picker.find(selectorOf("days picker")),this.$monthPrev=$picker.find(selectorOf("month prev")),this.$monthNext=$picker.find(selectorOf("month next")),this.$monthCurrent=$picker.find(selectorOf("month current")),this.$days=$picker.find(selectorOf("days")),this.inline?$(options.container||$this).append($picker.addClass("datepicker-inline")):($(document.body).append($picker.addClass("datepicker-dropdown")),$picker.addClass(CLASS_HIDE)),this.renderWeek()}}},{key:"unbuild",value:function(){this.built&&(this.built=!1,this.$picker.remove())}},{key:"bind",value:function(){var options=this.options,$this=this.$element;$.isFunction(options.show)&&$this.on("show.datepicker",options.show),$.isFunction(options.hide)&&$this.on("hide.datepicker",options.hide),$.isFunction(options.pick)&&$this.on("pick.datepicker",options.pick),this.isInput&&$this.on("keyup.datepicker",$.proxy(this.keyup,this)),this.inline||(options.trigger?this.$trigger.on(EVENT_CLICK,$.proxy(this.toggle,this)):this.isInput?$this.on("focus.datepicker",$.proxy(this.show,this)):$this.on(EVENT_CLICK,$.proxy(this.show,this)))}},{key:"unbind",value:function(){var $this=this.$element,options=this.options;$.isFunction(options.show)&&$this.off("show.datepicker",options.show),$.isFunction(options.hide)&&$this.off("hide.datepicker",options.hide),$.isFunction(options.pick)&&$this.off("pick.datepicker",options.pick),this.isInput&&$this.off("keyup.datepicker",this.keyup),this.inline||(options.trigger?this.$trigger.off(EVENT_CLICK,this.toggle):this.isInput?$this.off("focus.datepicker",this.show):$this.off(EVENT_CLICK,this.show))}},{key:"showView",value:function(view){var $yearsPicker=this.$yearsPicker,$monthsPicker=this.$monthsPicker,$daysPicker=this.$daysPicker,format=this.format;if(format.hasYear||format.hasMonth||format.hasDay)switch(Number(view)){case VIEWS_YEARS:$monthsPicker.addClass(CLASS_HIDE),$daysPicker.addClass(CLASS_HIDE),format.hasYear?(this.renderYears(),$yearsPicker.removeClass(CLASS_HIDE),this.place()):this.showView(VIEWS_DAYS);break;case VIEWS_MONTHS:$yearsPicker.addClass(CLASS_HIDE),$daysPicker.addClass(CLASS_HIDE),format.hasMonth?(this.renderMonths(),$monthsPicker.removeClass(CLASS_HIDE),this.place()):this.showView(VIEWS_YEARS);break;default:$yearsPicker.addClass(CLASS_HIDE),$monthsPicker.addClass(CLASS_HIDE),format.hasDay?(this.renderDays(),$daysPicker.removeClass(CLASS_HIDE),this.place()):this.showView(VIEWS_MONTHS)}}},{key:"hideView",value:function(){!this.inline&&this.options.autoHide&&this.hide()}},{key:"place",value:function(){if(!this.inline){var $this=this.$element,options=this.options,$picker=this.$picker,containerWidth=$(document).outerWidth(),containerHeight=$(document).outerHeight(),elementWidth=$this.outerWidth(),elementHeight=$this.outerHeight(),width=$picker.width(),height=$picker.height(),_$this$offset=$this.offset(),left=_$this$offset.left,top=_$this$offset.top,offset=parseFloat(options.offset),placement=CLASS_TOP_LEFT;isNaN(offset)&&(offset=10),height<top&&containerHeight<top+elementHeight+height?(top-=height+offset,placement=CLASS_BOTTOM_LEFT):top+=elementHeight+offset,containerWidth<left+width&&(left+=elementWidth-width,placement=placement.replace("left","right")),$picker.removeClass(CLASS_PLACEMENTS).addClass(placement).css({top:top,left:left,zIndex:parseInt(options.zIndex,10)})}}},{key:"trigger",value:function(type,data){var e=$.Event(type,data);return this.$element.trigger(e),e}},{key:"createItem",value:function(data){var options=this.options,itemTag=options.itemTag,item={text:"",view:"",muted:!1,picked:!1,disabled:!1,highlighted:!1},classes=[];return $.extend(item,data),item.muted&&classes.push(options.mutedClass),item.highlighted&&classes.push(options.highlightedClass),item.picked&&classes.push(options.pickedClass),item.disabled&&classes.push(options.disabledClass),"<"+itemTag+' class="'+classes.join(" ")+'" data-view="'+item.view+'">'+item.text+"</"+itemTag+">"}},{key:"getValue",value:function(){var $this=this.$element;return this.isInput?$this.val():$this.text()}},{key:"setValue",value:function(){var value=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",$this=this.$element;this.isInput?$this.val(value):$this.text(value)}}],[{key:"setDefaults",value:function(){var options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};$.extend(DEFAULTS,LANGUAGES[options.language],options)}}]),Datepicker}();if($.extend&&$.extend(Datepicker.prototype,render,handlers,methods),$.fn){var AnotherDatepicker=$.fn.datepicker;$.fn.datepicker=function(option){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var result=void 0;return this.each(function(i,element){var $element=$(element),isDestroy="destroy"===option,datepicker=$element.data(NAMESPACE);if(!datepicker){if(isDestroy)return;var options=$.extend({},$element.data(),$.isPlainObject(option)&&option);datepicker=new Datepicker(element,options),$element.data(NAMESPACE,datepicker)}if(isString(option)){var fn=datepicker[option];$.isFunction(fn)&&(result=fn.apply(datepicker,args),isDestroy&&$element.removeData(NAMESPACE))}}),isUndefined(result)?this:result},$.fn.datepicker.Constructor=Datepicker,$.fn.datepicker.languages=LANGUAGES,$.fn.datepicker.setDefaults=Datepicker.setDefaults,$.fn.datepicker.noConflict=function(){return $.fn.datepicker=AnotherDatepicker,this}}});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Emitter=function(){function Emitter(){_classCallCheck(this,Emitter)}return _createClass(Emitter,[{key:"on",value:function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this}},{key:"emit",value:function(event){this._callbacks=this._callbacks||{};var callbacks=this._callbacks[event];if(callbacks){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];for(var _i=0,_iterator=_iterator=callbacks;;){if(_i>=_iterator.length)break;_iterator[_i++].apply(this,args)}}return this}},{key:"off",value:function(event,fn){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1===arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++){if(callbacks[i]===fn){callbacks.splice(i,1);break}}return this}}]),Emitter}(),Dropzone=function(_Emitter){function Dropzone(el,options){_classCallCheck(this,Dropzone);var left,_this=_possibleConstructorReturn(this,(Dropzone.__proto__||Object.getPrototypeOf(Dropzone)).call(this)),fallback=void 0;if(_this.element=el,_this.version=Dropzone.version,_this.defaultOptions.previewTemplate=_this.defaultOptions.previewTemplate.replace(/\n*/g,""),_this.clickableElements=[],_this.listeners=[],_this.files=[],"string"==typeof _this.element&&(_this.element=document.querySelector(_this.element)),!_this.element||null==_this.element.nodeType)throw new Error("Invalid dropzone element.");if(_this.element.dropzone)throw new Error("Dropzone already attached.");Dropzone.instances.push(_this),_this.element.dropzone=_this;var _ret,elementOptions=null!=(left=Dropzone.optionsForElement(_this.element))?left:{};if(_this.options=Dropzone.extend({},_this.defaultOptions,elementOptions,null!=options?options:{}),_this.options.forceFallback||!Dropzone.isBrowserSupported())return _ret=_this.options.fallback.call(_this),_possibleConstructorReturn(_this,_ret);if(null==_this.options.url&&(_this.options.url=_this.element.getAttribute("action")),!_this.options.url)throw new Error("No URL provided.");if(_this.options.acceptedFiles&&_this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(_this.options.uploadMultiple&&_this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return _this.options.acceptedMimeTypes&&(_this.options.acceptedFiles=_this.options.acceptedMimeTypes,delete _this.options.acceptedMimeTypes),null!=_this.options.renameFilename&&(_this.options.renameFile=function(file){return _this.options.renameFilename.call(_this,file.name,file)}),_this.options.method=_this.options.method.toUpperCase(),(fallback=_this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==_this.options.previewsContainer&&(_this.options.previewsContainer?_this.previewsContainer=Dropzone.getElement(_this.options.previewsContainer,"previewsContainer"):_this.previewsContainer=_this.element),_this.options.clickable&&(!0===_this.options.clickable?_this.clickableElements=[_this.element]:_this.clickableElements=Dropzone.getElements(_this.options.clickable,"clickable")),_this.init(),_this}return _inherits(Dropzone,Emitter),_createClass(Dropzone,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(files,xhr,chunk){if(chunk)return{dzuuid:chunk.file.upload.uuid,dzchunkindex:chunk.index,dztotalfilesize:chunk.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:chunk.file.upload.totalChunkCount,dzchunkbyteoffset:chunk.index*this.options.chunkSize}},accept:function(file,done){return done()},chunksUploaded:function(file,done){done()},fallback:function(){var messageElement=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var _i2=0,_iterator2=_iterator2=this.element.getElementsByTagName("div");;){if(_i2>=_iterator2.length)break;var child=_iterator2[_i2++];if(/(^| )dz-message($| )/.test(child.className)){(messageElement=child).className="dz-message";break}}messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement));var span=messageElement.getElementsByTagName("span")[0];return span&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file,width,height,resizeMethod){var info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height;null==width&&null==height?(width=info.srcWidth,height=info.srcHeight):null==width?width=height*srcRatio:null==height&&(height=width/srcRatio);var trgRatio=(width=Math.min(width,info.srcWidth))/(height=Math.min(height,info.srcHeight));if(info.srcWidth>width||info.srcHeight>height)if("crop"===resizeMethod)trgRatio<srcRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio);else{if("contain"!==resizeMethod)throw new Error("Unknown resizeMethod '"+resizeMethod+"'");trgRatio<srcRatio?height=width/srcRatio:width=height*srcRatio}return info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info.trgWidth=width,info.trgHeight=height,info},transformFile:function(file,done){return(this.options.resizeWidth||this.options.resizeHeight)&&file.type.match(/image.*/)?this.resizeImage(file,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,done):done(file)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var _this2=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement);for(var _i3=0,_iterator3=_iterator3=file.previewElement.querySelectorAll("[data-dz-name]");;){if(_i3>=_iterator3.length)break;var node=_iterator3[_i3++];node.textContent=file.name}for(var _i4=0,_iterator4=_iterator4=file.previewElement.querySelectorAll("[data-dz-size]");!(_i4>=_iterator4.length);)(node=_iterator4[_i4++]).innerHTML=this.filesize(file.size);this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),file.previewElement.appendChild(file._removeLink));for(var removeFileEvent=function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this2.options.dictCancelUploadConfirmation,function(){return _this2.removeFile(file)}):_this2.options.dictRemoveFileConfirmation?Dropzone.confirm(_this2.options.dictRemoveFileConfirmation,function(){return _this2.removeFile(file)}):_this2.removeFile(file)},_i5=0,_iterator5=_iterator5=file.previewElement.querySelectorAll("[data-dz-remove]");;){if(_i5>=_iterator5.length)break;_iterator5[_i5++].addEventListener("click",removeFileEvent)}}},removedfile:function(file){return null!=file.previewElement&&null!=file.previewElement.parentNode&&file.previewElement.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");for(var _i6=0,_iterator6=_iterator6=file.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(_i6>=_iterator6.length)break;var thumbnailElement=_iterator6[_i6++];thumbnailElement.alt=file.name,thumbnailElement.src=dataUrl}return setTimeout(function(){return file.previewElement.classList.add("dz-image-preview")},1)}},error:function(file,message){if(file.previewElement){file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error);for(var _i7=0,_iterator7=_iterator7=file.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(_i7>=_iterator7.length)break;_iterator7[_i7++].textContent=message}}},errormultiple:function(){},processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(file,progress,bytesSent){if(file.previewElement)for(var _i8=0,_iterator8=_iterator8=file.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(_i8>=_iterator8.length)break;var node=_iterator8[_i8++];"PROGRESS"===node.nodeName?node.value=progress:node.style.width=progress+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(file){return this.emit("error",file,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(file){if(file._removeLink&&(file._removeLink.textContent=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(target){for(var _len2=arguments.length,objects=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)objects[_key2-1]=arguments[_key2];for(var _i9=0,_iterator9=_iterator9=objects;;){if(_i9>=_iterator9.length)break;var object=_iterator9[_i9++];for(var key in object){var val=object[key];target[key]=val}}return target}}]),_createClass(Dropzone,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(file){return file.accepted}).map(function(file){return file})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(file){return!file.accepted}).map(function(file){return file})}},{key:"getFilesWithStatus",value:function(status){return this.files.filter(function(file){return file.status===status}).map(function(file){return file})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(Dropzone.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(Dropzone.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(Dropzone.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(file){return file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED}).map(function(file){return file})}},{key:"init",value:function(){var _this3=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function setupHiddenFileInput(){return _this3.hiddenFileInput&&_this3.hiddenFileInput.parentNode.removeChild(_this3.hiddenFileInput),_this3.hiddenFileInput=document.createElement("input"),_this3.hiddenFileInput.setAttribute("type","file"),(null===_this3.options.maxFiles||1<_this3.options.maxFiles)&&_this3.hiddenFileInput.setAttribute("multiple","multiple"),_this3.hiddenFileInput.className="dz-hidden-input",null!==_this3.options.acceptedFiles&&_this3.hiddenFileInput.setAttribute("accept",_this3.options.acceptedFiles),null!==_this3.options.capture&&_this3.hiddenFileInput.setAttribute("capture",_this3.options.capture),_this3.hiddenFileInput.style.visibility="hidden",_this3.hiddenFileInput.style.position="absolute",_this3.hiddenFileInput.style.top="0",_this3.hiddenFileInput.style.left="0",_this3.hiddenFileInput.style.height="0",_this3.hiddenFileInput.style.width="0",document.querySelector(_this3.options.hiddenInputContainer).appendChild(_this3.hiddenFileInput),_this3.hiddenFileInput.addEventListener("change",function(){var files=_this3.hiddenFileInput.files;if(files.length)for(var _i10=0,_iterator10=_iterator10=files;!(_i10>=_iterator10.length);){var file=_iterator10[_i10++];_this3.addFile(file)}return _this3.emit("addedfiles",files),setupHiddenFileInput()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var _i11=0,_iterator11=_iterator11=this.events;;){if(_i11>=_iterator11.length)break;var eventName=_iterator11[_i11++];this.on(eventName,this.options[eventName])}this.on("uploadprogress",function(){return _this3.updateTotalUploadProgress()}),this.on("removedfile",function(){return _this3.updateTotalUploadProgress()}),this.on("canceled",function(file){return _this3.emit("complete",file)}),this.on("complete",function(file){if(0===_this3.getAddedFiles().length&&0===_this3.getUploadingFiles().length&&0===_this3.getQueuedFiles().length)return setTimeout(function(){return _this3.emit("queuecomplete")},0)});var noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return _this3.emit("dragstart",e)},dragenter:function(e){return noPropagation(e),_this3.emit("dragenter",e)},dragover:function(e){var efct=void 0;try{efct=e.dataTransfer.effectAllowed}catch(error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this3.emit("dragover",e)},dragleave:function(e){return _this3.emit("dragleave",e)},drop:function(e){return noPropagation(e),_this3.drop(e)},dragend:function(e){return _this3.emit("dragend",e)}}}],this.clickableElements.forEach(function(clickableElement){return _this3.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this3.element||evt.target===_this3.element||Dropzone.elementInside(evt.target,_this3.element.querySelector(".dz-message")))&&_this3.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var totalUploadProgress=void 0,totalBytesSent=0,totalBytes=0;if(this.getActiveFiles().length){for(var _i12=0,_iterator12=_iterator12=this.getActiveFiles();;){if(_i12>=_iterator12.length)break;var file=_iterator12[_i12++];totalBytesSent+=file.upload.bytesSent,totalBytes+=file.upload.total}totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)}},{key:"_getParamName",value:function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")}},{key:"_renameFile",value:function(file){return"function"!=typeof this.options.renameFile?file.name:this.options.renameFile(file)}},{key:"getFallbackForm",value:function(){var existingFallback,form=void 0;if(existingFallback=this.getExistingFallback())return existingFallback;var fieldsString='<div class="dz-fallback">';this.options.dictFallbackText&&(fieldsString+="<p>"+this.options.dictFallbackText+"</p>"),fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var fields=Dropzone.createElement(fieldsString);return"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(fields):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields}},{key:"getExistingFallback",value:function(){for(var getFallback=function(elements){for(var _i13=0,_iterator13=_iterator13=elements;;){if(_i13>=_iterator13.length)break;var el=_iterator13[_i13++];if(/(^| )fallback($| )/.test(el.className))return el}},_arr=["div","form"],_i14=0;_i14<_arr.length;_i14++){var fallback,tagName=_arr[_i14];if(fallback=getFallback(this.element.getElementsByTagName(tagName)))return fallback}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.addEventListener(event,listener,!1))}return result}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.removeEventListener(event,listener,!1))}return result}()})}},{key:"disable",value:function(){var _this4=this;return this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(file){return _this4.cancelUpload(file)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(size){var selectedSize=0,selectedUnit="b";if(0<size){for(var units=["tb","gb","mb","kb","b"],i=0;i<units.length;i++){var unit=units[i];if(Math.pow(this.options.filesizeBase,4-i)/10<=size){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}}selectedSize=Math.round(10*selectedSize)/10}return"<strong>"+selectedSize+"</strong> "+this.options.dictFileSizeUnits[selectedUnit]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);var files=e.dataTransfer.files;if(this.emit("addedfiles",files),files.length){var items=e.dataTransfer.items;items&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)}}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(x){return x.items})){this.emit("paste",e);var items=e.clipboardData.items;return items.length?this._addFilesFromItems(items):void 0}}},{key:"handleFiles",value:function(files){for(var _i15=0,_iterator14=_iterator14=files;;){if(_i15>=_iterator14.length)break;var file=_iterator14[_i15++];this.addFile(file)}}},{key:"_addFilesFromItems",value:function(items){var _this5=this;return function(){for(var result=[],_i16=0,_iterator15=_iterator15=items;;){if(_i16>=_iterator15.length)break;var entry,item=_iterator15[_i16++];null!=item.webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?result.push(_this5.addFile(item.getAsFile())):entry.isDirectory?result.push(_this5._addFilesFromDirectory(entry,entry.name)):result.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?result.push(_this5.addFile(item.getAsFile())):result.push(void 0)}return result}()}},{key:"_addFilesFromDirectory",value:function(directory,path){var _this6=this,dirReader=directory.createReader(),errorHandler=function(error){return __guardMethod__(console,"log",function(o){return o.log(error)})};return function readEntries(){return dirReader.readEntries(function(entries){if(0<entries.length){for(var _i17=0,_iterator16=_iterator16=entries;!(_i17>=_iterator16.length);){var entry=_iterator16[_i17++];entry.isFile?entry.file(function(file){if(!_this6.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath=path+"/"+file.name,_this6.addFile(file)}):entry.isDirectory&&_this6._addFilesFromDirectory(entry,path+"/"+entry.name)}readEntries()}return null},errorHandler)}()}},{key:"accept",value:function(file,done){return file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)}},{key:"addFile",value:function(file){var _this7=this;return file.upload={uuid:Dropzone.uuidv4(),progress:0,total:file.size,bytesSent:0,filename:this._renameFile(file),chunked:this.options.chunking&&(this.options.forceChunking||file.size>this.options.chunkSize),totalChunkCount:Math.ceil(file.size/this.options.chunkSize)},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,function(error){return error?(file.accepted=!1,_this7._errorProcessing([file],error)):(file.accepted=!0,_this7.options.autoQueue&&_this7.enqueueFile(file)),_this7._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(files){for(var _i18=0,_iterator17=_iterator17=files;;){if(_i18>=_iterator17.length)break;var file=_iterator17[_i18++];this.enqueueFile(file)}return null}},{key:"enqueueFile",value:function(file){var _this8=this;if(file.status!==Dropzone.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(file.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return _this8.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(file){var _this9=this;if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(file),setTimeout(function(){return _this9._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var _this10=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var file=this._thumbnailQueue.shift();return this.createThumbnail(file,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(dataUrl){return _this10.emit("thumbnail",file,dataUrl),_this10._processingThumbnail=!1,_this10._processThumbnailQueue()})}}},{key:"removeFile",value:function(file){if(file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(cancelIfNecessary){null==cancelIfNecessary&&(cancelIfNecessary=!1);for(var _i19=0,_iterator18=_iterator18=this.files.slice();;){if(_i19>=_iterator18.length)break;var file=_iterator18[_i19++];(file.status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file)}return null}},{key:"resizeImage",value:function(file,width,height,resizeMethod,callback){var _this11=this;return this.createThumbnail(file,width,height,resizeMethod,!1,function(dataUrl,canvas){if(null==canvas)return callback(file);var resizeMimeType=_this11.options.resizeMimeType;null==resizeMimeType&&(resizeMimeType=file.type);var resizedDataURL=canvas.toDataURL(resizeMimeType,_this11.options.resizeQuality);return"image/jpeg"!==resizeMimeType&&"image/jpg"!==resizeMimeType||(resizedDataURL=ExifRestore.restore(file.dataURL,resizedDataURL)),callback(Dropzone.dataURItoBlob(resizedDataURL))})}},{key:"createThumbnail",value:function(file,width,height,resizeMethod,fixOrientation,callback){var _this12=this,fileReader=new FileReader;return fileReader.onload=function(){if(file.dataURL=fileReader.result,"image/svg+xml"!==file.type)return _this12.createThumbnailFromUrl(file,width,height,resizeMethod,fixOrientation,callback);null!=callback&&callback(fileReader.result)},fileReader.readAsDataURL(file)}},{key:"createThumbnailFromUrl",value:function(file,width,height,resizeMethod,fixOrientation,callback,crossOrigin){var _this13=this,img=document.createElement("img");return crossOrigin&&(img.crossOrigin=crossOrigin),img.onload=function(){var loadExif=function(callback){return callback(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&fixOrientation&&(loadExif=function(callback){return EXIF.getData(img,function(){return callback(EXIF.getTag(this,"Orientation"))})}),loadExif(function(orientation){file.width=img.width,file.height=img.height;var resizeInfo=_this13.options.resize.call(_this13,file,width,height,resizeMethod),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,4<orientation&&(canvas.width=resizeInfo.trgHeight,canvas.height=resizeInfo.trgWidth),orientation){case 2:ctx.translate(canvas.width,0),ctx.scale(-1,1);break;case 3:ctx.translate(canvas.width,canvas.height),ctx.rotate(Math.PI);break;case 4:ctx.translate(0,canvas.height),ctx.scale(1,-1);break;case 5:ctx.rotate(.5*Math.PI),ctx.scale(1,-1);break;case 6:ctx.rotate(.5*Math.PI),ctx.translate(0,-canvas.height);break;case 7:ctx.rotate(.5*Math.PI),ctx.translate(canvas.width,-canvas.height),ctx.scale(-1,1);break;case 8:ctx.rotate(-.5*Math.PI),ctx.translate(-canvas.width,0)}drawImageIOSFix(ctx,img,null!=resizeInfo.srcX?resizeInfo.srcX:0,null!=resizeInfo.srcY?resizeInfo.srcY:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=resizeInfo.trgX?resizeInfo.trgX:0,null!=resizeInfo.trgY?resizeInfo.trgY:0,resizeInfo.trgWidth,resizeInfo.trgHeight);var thumbnail=canvas.toDataURL("image/png");if(null!=callback)return callback(thumbnail,canvas)})},null!=callback&&(img.onerror=callback),img.src=file.dataURL}},{key:"processQueue",value:function(){var parallelUploads=this.options.parallelUploads,processingLength=this.getUploadingFiles().length,i=processingLength;if(!(parallelUploads<=processingLength)){var queuedFiles=this.getQueuedFiles();if(0<queuedFiles.length){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}}}},{key:"processFile",value:function(file){return this.processFiles([file])}},{key:"processFiles",value:function(files){for(var _i20=0,_iterator19=_iterator19=files;;){if(_i20>=_iterator19.length)break;var file=_iterator19[_i20++];file.processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file)}return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)}},{key:"_getFilesWithXhr",value:function(xhr){return this.files.filter(function(file){return file.xhr===xhr}).map(function(file){return file})}},{key:"cancelUpload",value:function(file){if(file.status===Dropzone.UPLOADING){for(var groupedFiles=this._getFilesWithXhr(file.xhr),_i21=0,_iterator20=_iterator20=groupedFiles;;){if(_i21>=_iterator20.length)break;_iterator20[_i21++].status=Dropzone.CANCELED}void 0!==file.xhr&&file.xhr.abort();for(var _i22=0,_iterator21=_iterator21=groupedFiles;;){if(_i22>=_iterator21.length)break;var _groupedFile=_iterator21[_i22++];this.emit("canceled",_groupedFile)}this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else file.status!==Dropzone.ADDED&&file.status!==Dropzone.QUEUED||(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(option){if("function"==typeof option){for(var _len3=arguments.length,args=Array(1<_len3?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return option.apply(this,args)}return option}},{key:"uploadFile",value:function(file){return this.uploadFiles([file])}},{key:"uploadFiles",value:function(files){var _this14=this;this._transformFiles(files,function(transformedFiles){if(files[0].upload.chunked){var file=files[0],transformedFile=transformedFiles[0];file.upload.chunks=[];var handleNextChunk=function(){for(var chunkIndex=0;void 0!==file.upload.chunks[chunkIndex];)chunkIndex++;if(!(chunkIndex>=file.upload.totalChunkCount)){0;var start=chunkIndex*_this14.options.chunkSize,end=Math.min(start+_this14.options.chunkSize,file.size),dataBlock={name:_this14._getParamName(0),data:transformedFile.webkitSlice?transformedFile.webkitSlice(start,end):transformedFile.slice(start,end),filename:file.upload.filename,chunkIndex:chunkIndex};file.upload.chunks[chunkIndex]={file:file,index:chunkIndex,dataBlock:dataBlock,status:Dropzone.UPLOADING,progress:0,retries:0},_this14._uploadData(files,[dataBlock])}};if(file.upload.finishedChunkUpload=function(chunk){var allFinished=!0;chunk.status=Dropzone.SUCCESS,chunk.dataBlock=null;for(var i=0;i<file.upload.totalChunkCount;i++){if(void 0===file.upload.chunks[i])return handleNextChunk();file.upload.chunks[i].status!==Dropzone.SUCCESS&&(allFinished=!1)}allFinished&&_this14.options.chunksUploaded(file,function(){_this14._finished(files,"",null)})},_this14.options.parallelChunkUploads)for(var i=0;i<file.upload.totalChunkCount;i++)handleNextChunk();else handleNextChunk()}else{for(var dataBlocks=[],_i23=0;_i23<files.length;_i23++)dataBlocks[_i23]={name:_this14._getParamName(_i23),data:transformedFiles[_i23],filename:files[_i23].upload.filename};_this14._uploadData(files,dataBlocks)}})}},{key:"_getChunk",value:function(file,xhr){for(var i=0;i<file.upload.totalChunkCount;i++)if(void 0!==file.upload.chunks[i]&&file.upload.chunks[i].xhr===xhr)return file.upload.chunks[i]}},{key:"_uploadData",value:function(files,dataBlocks){for(var _this15=this,xhr=new XMLHttpRequest,_i24=0,_iterator22=_iterator22=files;;){if(_i24>=_iterator22.length)break;_iterator22[_i24++].xhr=xhr}files[0].upload.chunked&&(files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr=xhr);var method=this.resolveOption(this.options.method,files),url=this.resolveOption(this.options.url,files);xhr.open(method,url,!0),xhr.timeout=this.resolveOption(this.options.timeout,files),xhr.withCredentials=!!this.options.withCredentials,xhr.onload=function(e){_this15._finishedUploading(files,xhr,e)},xhr.onerror=function(){_this15._handleUploadError(files,xhr)},(null!=xhr.upload?xhr.upload:xhr).onprogress=function(e){return _this15._updateFilesUploadProgress(files,xhr,e)};var headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var headerName in this.options.headers&&Dropzone.extend(headers,this.options.headers),headers){var headerValue=headers[headerName];headerValue&&xhr.setRequestHeader(headerName,headerValue)}var formData=new FormData;if(this.options.params){var additionalParams=this.options.params;for(var key in"function"==typeof additionalParams&&(additionalParams=additionalParams.call(this,files,xhr,files[0].upload.chunked?this._getChunk(files[0],xhr):null)),additionalParams){var value=additionalParams[key];formData.append(key,value)}}for(var _i25=0,_iterator23=_iterator23=files;;){if(_i25>=_iterator23.length)break;var _file=_iterator23[_i25++];this.emit("sending",_file,xhr,formData)}this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),this._addFormElementData(formData);for(var i=0;i<dataBlocks.length;i++){var dataBlock=dataBlocks[i];formData.append(dataBlock.name,dataBlock.data,dataBlock.filename)}this.submitRequest(xhr,formData,files)}},{key:"_transformFiles",value:function(files,done){for(var _this16=this,transformedFiles=[],doneCounter=0,_loop=function(i){_this16.options.transformFile.call(_this16,files[i],function(transformedFile){transformedFiles[i]=transformedFile,++doneCounter===files.length&&done(transformedFiles)})},i=0;i<files.length;i++)_loop(i)}},{key:"_addFormElementData",value:function(formData){if("FORM"===this.element.tagName)for(var _i26=0,_iterator24=_iterator24=this.element.querySelectorAll("input, textarea, select, button");;){if(_i26>=_iterator24.length)break;var input=_iterator24[_i26++],inputName=input.getAttribute("name"),inputType=input.getAttribute("type");if(inputType&&(inputType=inputType.toLowerCase()),null!=inputName)if("SELECT"===input.tagName&&input.hasAttribute("multiple"))for(var _i27=0,_iterator25=_iterator25=input.options;;){if(_i27>=_iterator25.length)break;var option=_iterator25[_i27++];option.selected&&formData.append(inputName,option.value)}else(!inputType||"checkbox"!==inputType&&"radio"!==inputType||input.checked)&&formData.append(inputName,input.value)}}},{key:"_updateFilesUploadProgress",value:function(files,xhr,e){var progress=void 0;if(void 0!==e){if(progress=100*e.loaded/e.total,files[0].upload.chunked){var file=files[0],chunk=this._getChunk(file,xhr);chunk.progress=progress,chunk.total=e.total,chunk.bytesSent=e.loaded;file.upload.progress=0,file.upload.total=0;for(var i=file.upload.bytesSent=0;i<file.upload.totalChunkCount;i++)void 0!==file.upload.chunks[i]&&void 0!==file.upload.chunks[i].progress&&(file.upload.progress+=file.upload.chunks[i].progress,file.upload.total+=file.upload.chunks[i].total,file.upload.bytesSent+=file.upload.chunks[i].bytesSent);file.upload.progress=file.upload.progress/file.upload.totalChunkCount}else for(var _i28=0,_iterator26=_iterator26=files;;){if(_i28>=_iterator26.length)break;var _file2=_iterator26[_i28++];_file2.upload.progress=progress,_file2.upload.total=e.total,_file2.upload.bytesSent=e.loaded}for(var _i29=0,_iterator27=_iterator27=files;;){if(_i29>=_iterator27.length)break;var _file3=_iterator27[_i29++];this.emit("uploadprogress",_file3,_file3.upload.progress,_file3.upload.bytesSent)}}else{var allFilesFinished=!0;progress=100;for(var _i30=0,_iterator28=_iterator28=files;;){if(_i30>=_iterator28.length)break;var _file4=_iterator28[_i30++];100===_file4.upload.progress&&_file4.upload.bytesSent===_file4.upload.total||(allFilesFinished=!1),_file4.upload.progress=progress,_file4.upload.bytesSent=_file4.upload.total}if(allFilesFinished)return;for(var _i31=0,_iterator29=_iterator29=files;;){if(_i31>=_iterator29.length)break;var _file5=_iterator29[_i31++];this.emit("uploadprogress",_file5,progress,_file5.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(files,xhr,e){var response=void 0;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if("arraybuffer"!==xhr.responseType&&"blob"!==xhr.responseType&&(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")))try{response=JSON.parse(response)}catch(error){e=error,response="Invalid JSON response from server."}this._updateFilesUploadProgress(files),200<=xhr.status&&xhr.status<300?files[0].upload.chunked?files[0].upload.finishedChunkUpload(this._getChunk(files[0],xhr)):this._finished(files,response,e):this._handleUploadError(files,xhr,response)}}},{key:"_handleUploadError",value:function(files,xhr,response){if(files[0].status!==Dropzone.CANCELED){if(files[0].upload.chunked&&this.options.retryChunks){var chunk=this._getChunk(files[0],xhr);if(chunk.retries++<this.options.retryChunksLimit)return void this._uploadData(files,[chunk.dataBlock])}for(var _i32=0,_iterator30=_iterator30=files;;){if(_i32>=_iterator30.length)break;_iterator30[_i32++];this._errorProcessing(files,response||this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr)}}}},{key:"submitRequest",value:function(xhr,formData,files){xhr.send(formData)}},{key:"_finished",value:function(files,responseText,e){for(var _i33=0,_iterator31=_iterator31=files;;){if(_i33>=_iterator31.length)break;var file=_iterator31[_i33++];file.status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file)}if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(files,message,xhr){for(var _i34=0,_iterator32=_iterator32=files;;){if(_i34>=_iterator32.length)break;var file=_iterator32[_i34++];file.status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file)}if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}}]),Dropzone}();Dropzone.initClass(),Dropzone.version="5.3.1",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var dropzones=void 0;if(document.querySelectorAll)dropzones=document.querySelectorAll(".dropzone");else{dropzones=[];var checkElements=function(elements){return function(){for(var result=[],_i35=0,_iterator33=_iterator33=elements;;){if(_i35>=_iterator33.length)break;var el=_iterator33[_i35++];/(^| )dropzone($| )/.test(el.className)?result.push(dropzones.push(el)):result.push(void 0)}return result}()};checkElements(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))}return function(){for(var result=[],_i36=0,_iterator34=_iterator34=dropzones;;){if(_i36>=_iterator34.length)break;var dropzone=_iterator34[_i36++];!1!==Dropzone.optionsForElement(dropzone)?result.push(new Dropzone(dropzone)):result.push(void 0)}return result}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var _i37=0,_iterator35=_iterator35=Dropzone.blacklistedBrowsers;;){if(_i37>=_iterator35.length)break;_iterator35[_i37++].test(navigator.userAgent)&&(capableBrowser=!1)}else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},Dropzone.dataURItoBlob=function(dataURI){for(var byteString=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab),i=0,end=byteString.length,asc=0<=end;asc?i<=end:end<=i;asc?i++:i--)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type:mimeString})};var without=function(list,rejectedItem){return list.filter(function(item){return item!==rejectedItem}).map(function(item){return item})},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})};Dropzone.createElement=function(string){var div=document.createElement("div");return div.innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element=void 0;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");return element},Dropzone.getElements=function(els,name){var el=void 0,elements=void 0;if(els instanceof Array){elements=[];try{for(var _i38=0,_iterator36=_iterator36=els;!(_i38>=_iterator36.length);)el=_iterator36[_i38++],elements.push(this.getElement(el,name))}catch(e){elements=null}}else if("string"==typeof els){elements=[];for(var _i39=0,_iterator37=_iterator37=document.querySelectorAll(els);!(_i39>=_iterator37.length);)el=_iterator37[_i39++],elements.push(el)}else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){if(!acceptedFiles)return!0;acceptedFiles=acceptedFiles.split(",");for(var mimeType=file.type,baseMimeType=mimeType.replace(/\/.*$/,""),_i40=0,_iterator38=_iterator38=acceptedFiles;;){if(_i40>=_iterator38.length)break;var validType=_iterator38[_i40++];if("."===(validType=validType.trim()).charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(img){img.naturalWidth;var ih=img.naturalHeight,canvas=document.createElement("canvas");canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);for(var data=ctx.getImageData(1,0,1,ih).data,sy=0,ey=ih,py=ih;sy<py;){0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1}var ratio=py/ih;return 0===ratio?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},ExifRestore=function(){function ExifRestore(){_classCallCheck(this,ExifRestore)}return _createClass(ExifRestore,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(input){for(var output="",chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0;enc1=(chr1=input[i++])>>2,enc2=(3&chr1)<<4|(chr2=input[i++])>>4,enc3=(15&chr2)<<2|(chr3=input[i++])>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this.KEY_STR.charAt(enc1)+this.KEY_STR.charAt(enc2)+this.KEY_STR.charAt(enc3)+this.KEY_STR.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",i<input.length;);return output}},{key:"restore",value:function(origFileBase64,resizedFileBase64){if(!origFileBase64.match("data:image/jpeg;base64,"))return resizedFileBase64;var rawImage=this.decode64(origFileBase64.replace("data:image/jpeg;base64,","")),segments=this.slice2Segments(rawImage),image=this.exifManipulation(resizedFileBase64,segments);return"data:image/jpeg;base64,"+this.encode64(image)}},{key:"exifManipulation",value:function(resizedFileBase64,segments){var exifArray=this.getExifArray(segments),newImageArray=this.insertExif(resizedFileBase64,exifArray);return new Uint8Array(newImageArray)}},{key:"getExifArray",value:function(segments){for(var seg=void 0,x=0;x<segments.length;){if(255===(seg=segments[x])[0]&225===seg[1])return seg;x++}return[]}},{key:"insertExif",value:function(resizedFileBase64,exifArray){var imageData=resizedFileBase64.replace("data:image/jpeg;base64,",""),buf=this.decode64(imageData),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae;return array=(array=array.concat(exifArray)).concat(ato)}},{key:"slice2Segments",value:function(rawImageArray){for(var head=0,segments=[];;){if(255===rawImageArray[head]&218===rawImageArray[head+1])break;if(255===rawImageArray[head]&216===rawImageArray[head+1])head+=2;else{var endPoint=head+(256*rawImageArray[head+2]+rawImageArray[head+3])+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg),head=endPoint}if(head>rawImageArray.length)break}return segments}},{key:"decode64",value:function(input){var chr1=void 0,chr2=void 0,chr3="",enc2=void 0,enc3=void 0,enc4="",i=0,buf=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(input),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");chr1=this.KEY_STR.indexOf(input.charAt(i++))<<2|(enc2=this.KEY_STR.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=this.KEY_STR.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=this.KEY_STR.indexOf(input.charAt(i++))),buf.push(chr1),64!==enc3&&buf.push(chr2),64!==enc4&&buf.push(chr3),chr1=chr2=chr3="",enc2=enc3=enc4="",i<input.length;);return buf}}]),ExifRestore}();ExifRestore.initClass();var contentLoaded=function(win,fn){var done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function init(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0};if("complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(error){}top&&function poll(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}return init("poll")}()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}};function __guard__(value,transform){return null!=value?transform(value):void 0}function __guardMethod__(obj,methodName,transform){return null!=obj&&"function"==typeof obj[methodName]?transform(obj,methodName):void 0}Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function(global,factory){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",factory):"object"==typeof module&&module.exports?module.exports=factory():global.EvEmitter=factory()}("undefined"!=typeof window?window:this,function(){function EvEmitter(){}var proto=EvEmitter.prototype;return proto.on=function(eventName,listener){if(eventName&&listener){var events=this._events=this._events||{},listeners=events[eventName]=events[eventName]||[];return-1==listeners.indexOf(listener)&&listeners.push(listener),this}},proto.once=function(eventName,listener){if(eventName&&listener){this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};return(onceEvents[eventName]=onceEvents[eventName]||{})[listener]=!0,this}},proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){var index=listeners.indexOf(listener);return-1!=index&&listeners.splice(index,1),this}},proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){listeners=listeners.slice(0),args=args||[];for(var onceListeners=this._onceEvents&&this._onceEvents[eventName],i=0;i<listeners.length;i++){var listener=listeners[i];onceListeners&&onceListeners[listener]&&(this.off(eventName,listener),delete onceListeners[listener]),listener.apply(this,args)}return this}},proto.allOff=function(){delete this._events,delete this._onceEvents},EvEmitter}),function(window,factory){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(EvEmitter){return factory(window,EvEmitter)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("ev-emitter")):window.imagesLoaded=factory(window,window.EvEmitter)}("undefined"!=typeof window?window:this,function(window,EvEmitter){var $=window.jQuery,console=window.console;function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}var arraySlice=Array.prototype.slice;function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded))return new ImagesLoaded(elem,options,onAlways);var obj,queryElem=elem;("string"==typeof elem&&(queryElem=document.querySelectorAll(elem)),queryElem)?(this.elements=(obj=queryElem,Array.isArray(obj)?obj:"object"==typeof obj&&"number"==typeof obj.length?arraySlice.call(obj):[obj]),this.options=extend({},this.options),"function"==typeof options?onAlways=options:extend(this.options,options),onAlways&&this.on("always",onAlways),this.getImages(),$&&(this.jqDeferred=new $.Deferred),setTimeout(this.check.bind(this))):console.error("Bad element for imagesLoaded "+(queryElem||elem))}(ImagesLoaded.prototype=Object.create(EvEmitter.prototype)).options={},ImagesLoaded.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},ImagesLoaded.prototype.addElementImages=function(elem){"IMG"==elem.nodeName&&this.addImage(elem),!0===this.options.background&&this.addElementBackgroundImages(elem);var nodeType=elem.nodeType;if(nodeType&&elementNodeTypes[nodeType]){for(var childImgs=elem.querySelectorAll("img"),i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img)}if("string"==typeof this.options.background){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child)}}}};var elementNodeTypes={1:!0,9:!0,11:!0};function LoadingImage(img){this.img=img}function Background(url,element){this.url=url,this.element=element,this.img=new Image}return ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(style)for(var reURL=/url\((['"])?(.*?)\1\)/gi,matches=reURL.exec(style.backgroundImage);null!==matches;){var url=matches&&matches[2];url&&this.addBackground(url,elem),matches=reURL.exec(style.backgroundImage)}},ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)},ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background)},ImagesLoaded.prototype.check=function(){var _this=this;function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(loadingImage){loadingImage.once("progress",onProgress),loadingImage.check()}):this.complete()},ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded,this.emitEvent("progress",[this,image,elem]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,image),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&console&&console.log("progress: "+message,image,elem)},ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(eventName,[this]),this.emitEvent("always",[this]),this.jqDeferred){var jqMethod=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[jqMethod](this)}},(LoadingImage.prototype=Object.create(EvEmitter.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded,this.emitEvent("progress",[this,this.img,message])},LoadingImage.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},LoadingImage.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},LoadingImage.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(Background.prototype=Object.create(LoadingImage.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},Background.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded,this.emitEvent("progress",[this,this.element,message])},ImagesLoaded.makeJQueryPlugin=function(jQuery){(jQuery=jQuery||window.jQuery)&&(($=jQuery).fn.imagesLoaded=function(options,callback){return new ImagesLoaded(this,options,callback).jqDeferred.promise($(this))})},ImagesLoaded.makeJQueryPlugin(),ImagesLoaded}),function($,undefined){$.fn.extend({_aria:function(name,value){return this.attr("aria-"+name,value)},_removeAria:function(name){return this.removeAttr("aria-"+name)},_enableAria:function(enable){return null==enable||enable?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(show){return null==show||show?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(select){return null==select||select?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(id){return id?this.attr("id",id):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var args=1===arguments.length&&$.isArray(arguments[0])?arguments[0]:arguments,formattedString=this,i=0;i<args.length;i++){var pattern=new RegExp("\\{"+i+"\\}","gm");formattedString=formattedString.replace(pattern,args[i])}return formattedString});var _uniqueId=0,_cookiePrefix="jQu3ry_5teps_St@te_",_tabSuffix="-t-",_tabpanelSuffix="-p-",_titleSuffix="-h-",_indexOutOfRangeErrorMessage="Index out of range.",_missingCorrespondingElementErrorMessage="One or more corresponding step {0} are missing.";function analyzeData(wizard,options,state){var stepTitles=wizard.children(options.headerTag),stepContents=wizard.children(options.bodyTag);stepTitles.length>stepContents.length?throwError(_missingCorrespondingElementErrorMessage,"contents"):stepTitles.length<stepContents.length&&throwError(_missingCorrespondingElementErrorMessage,"titles");var startIndex=options.startIndex;if(state.stepCount=stepTitles.length,options.saveState&&$.cookie){var savedState=$.cookie(_cookiePrefix+getUniqueId(wizard)),savedIndex=parseInt(savedState,0);!isNaN(savedIndex)&&savedIndex<state.stepCount&&(startIndex=savedIndex)}state.currentIndex=startIndex,stepTitles.each(function(index){var item=$(this),content=stepContents.eq(index),modeData=content.data("mode"),mode=null==modeData?contentMode.html:getValidEnumValue(contentMode,/^\s*$/.test(modeData)||isNaN(modeData)?modeData:parseInt(modeData,0)),contentUrl=mode===contentMode.html||content.data("url")===undefined?"":content.data("url"),contentLoaded=mode!==contentMode.html&&"1"===content.data("loaded"),step=$.extend({},stepModel,{title:item.html(),content:mode===contentMode.html?content.html():"",contentUrl:contentUrl,contentMode:mode,contentLoaded:contentLoaded});!function(wizard,step){getSteps(wizard).push(step)}(wizard,step)})}function finishStep(wizard,state){var currentStep=wizard.find(".steps li").eq(state.currentIndex);wizard.triggerHandler("finishing",[state.currentIndex])?(currentStep.addClass("done").removeClass("error"),wizard.triggerHandler("finished",[state.currentIndex])):currentStep.addClass("error")}function getEventNamespace(wizard){var eventNamespace=wizard.data("eventNamespace");return null==eventNamespace&&(eventNamespace="."+getUniqueId(wizard),wizard.data("eventNamespace",eventNamespace)),eventNamespace}function getStepAnchor(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+_tabSuffix+index)}function getStepPanel(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+_tabpanelSuffix+index)}function getOptions(wizard){return wizard.data("options")}function getState(wizard){return wizard.data("state")}function getSteps(wizard){return wizard.data("steps")}function getStep(wizard,index){var steps=getSteps(wizard);return(index<0||index>=steps.length)&&throwError(_indexOutOfRangeErrorMessage),steps[index]}function getUniqueId(wizard){var uniqueId=wizard.data("uid");return null==uniqueId&&(null==(uniqueId=wizard._id())&&(uniqueId="steps-uid-".concat(_uniqueId),wizard._id(uniqueId)),_uniqueId++,wizard.data("uid",uniqueId)),uniqueId}function getValidEnumValue(enumType,keyOrValue){if(validateArgument("enumType",enumType),validateArgument("keyOrValue",keyOrValue),"string"==typeof keyOrValue){var value=enumType[keyOrValue];return value===undefined&&throwError("The enum key '{0}' does not exist.",keyOrValue),value}if("number"==typeof keyOrValue){for(var key in enumType)if(enumType[key]===keyOrValue)return keyOrValue;throwError("Invalid enum value '{0}'.",keyOrValue)}else throwError("Invalid key or value type.")}function goToNextStep(wizard,options,state){return paginationClick(wizard,options,state,function(state,increaseBy){return state.currentIndex+increaseBy}(state,1))}function goToPreviousStep(wizard,options,state){return paginationClick(wizard,options,state,function(state,decreaseBy){return state.currentIndex-decreaseBy}(state,1))}function goToStep(wizard,options,state,index){if((index<0||index>=state.stepCount)&&throwError(_indexOutOfRangeErrorMessage),!(options.forceMoveForward&&index<state.currentIndex)){var oldIndex=state.currentIndex;return wizard.triggerHandler("stepChanging",[state.currentIndex,index])?(state.currentIndex=index,saveCurrentStateToCookie(wizard,options,state),refreshStepNavigation(wizard,options,state,oldIndex),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state),function(wizard,options,state,index,oldIndex,doneCallback){var stepContents=wizard.find(".content > .body"),effect=getValidEnumValue(transitionEffect,options.transitionEffect),effectSpeed=options.transitionEffectSpeed,newStep=stepContents.eq(index),currentStep=stepContents.eq(oldIndex);switch(effect){case transitionEffect.fade:case transitionEffect.slide:var hide=effect===transitionEffect.fade?"fadeOut":"slideUp",show=effect===transitionEffect.fade?"fadeIn":"slideDown";state.transitionElement=newStep,currentStep[hide](effectSpeed,function(){var wizard=$(this)._showAria(!1).parent().parent(),state=getState(wizard);state.transitionElement&&(state.transitionElement[show](effectSpeed,function(){$(this)._showAria()}).promise().done(doneCallback),state.transitionElement=null)});break;case transitionEffect.slideLeft:var outerWidth=currentStep.outerWidth(!0),posFadeOut=oldIndex<index?-outerWidth:outerWidth,posFadeIn=oldIndex<index?outerWidth:-outerWidth;$.when(currentStep.animate({left:posFadeOut},effectSpeed,function(){$(this)._showAria(!1)}),newStep.css("left",posFadeIn+"px")._showAria().animate({left:0},effectSpeed)).done(doneCallback);break;default:$.when(currentStep._showAria(!1),newStep._showAria()).done(doneCallback)}}(wizard,options,state,index,oldIndex,function(){wizard.triggerHandler("stepChanged",[index,oldIndex])})):wizard.find(".steps li").eq(oldIndex).addClass("error"),!0}}function initialize(options){var opts=$.extend(!0,{},defaults,options);return this.each(function(){var wizard=$(this),state={currentIndex:opts.startIndex,currentStep:null,stepCount:0,transitionElement:null};wizard.data("options",opts),wizard.data("state",state),wizard.data("steps",[]),analyzeData(wizard,opts,state),function(wizard,options,state){var verticalCssClass=getValidEnumValue(stepsOrientation,options.stepsOrientation)===stepsOrientation.vertical?" vertical":"",contentWrapper=$('<{0} class="{1}">{2}</{0}>'.format(options.contentContainerTag,"content "+options.clearFixCssClass,wizard.html())),stepsWrapper=$('<{0} class="{1}">{2}</{0}>'.format(options.stepsContainerTag,"steps "+options.clearFixCssClass,'<ul role="tablist"></ul>')),stepTitles=contentWrapper.children(options.headerTag),stepContents=contentWrapper.children(options.bodyTag);wizard.attr("role","application").empty().append(stepsWrapper).append(contentWrapper).addClass(options.cssClass+" "+options.clearFixCssClass+verticalCssClass),stepContents.each(function(index){renderBody(wizard,state,$(this),index)}),stepTitles.each(function(index){renderTitle(wizard,options,state,$(this),index)}),refreshStepNavigation(wizard,options,state),function(wizard,options,state){if(options.enablePagination){var buttonTemplate='<li><a href="#{0}" role="menuitem">{1}</a></li>',buttons="";options.forceMoveForward||(buttons+=buttonTemplate.format("previous",options.labels.previous)),buttons+=buttonTemplate.format("next",options.labels.next),options.enableFinishButton&&(buttons+=buttonTemplate.format("finish",options.labels.finish)),options.enableCancelButton&&(buttons+=buttonTemplate.format("cancel",options.labels.cancel)),wizard.append('<{0} class="actions {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>'.format(options.actionContainerTag,options.clearFixCssClass,options.labels.pagination,buttons)),refreshPagination(wizard,options,state),loadAsyncContent(wizard,options,state)}}(wizard,options,state)}(wizard,opts,state),function(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.bind("canceled"+eventNamespace,options.onCanceled),wizard.bind("contentLoaded"+eventNamespace,options.onContentLoaded),wizard.bind("finishing"+eventNamespace,options.onFinishing),wizard.bind("finished"+eventNamespace,options.onFinished),wizard.bind("init"+eventNamespace,options.onInit),wizard.bind("stepChanging"+eventNamespace,options.onStepChanging),wizard.bind("stepChanged"+eventNamespace,options.onStepChanged),options.enableKeyNavigation&&wizard.bind("keyup"+eventNamespace,keyUpHandler);wizard.find(".actions a").bind("click"+eventNamespace,paginationClickHandler)}(wizard,opts),opts.autoFocus&&0===_uniqueId&&getStepAnchor(wizard,opts.startIndex).focus(),wizard.triggerHandler("init",[opts.startIndex])})}function insertStep(wizard,options,state,index,step){(index<0||index>state.stepCount)&&throwError(_indexOutOfRangeErrorMessage),function(wizard,index,step){getSteps(wizard).splice(index,0,step)}(wizard,index,step=$.extend({},stepModel,step)),state.currentIndex!==state.stepCount&&state.currentIndex>=index&&(state.currentIndex++,saveCurrentStateToCookie(wizard,options,state)),state.stepCount++;var contentContainer=wizard.find(".content"),header=$("<{0}>{1}</{0}>".format(options.headerTag,step.title)),body=$("<{0}></{0}>".format(options.bodyTag));return null!=step.contentMode&&step.contentMode!==contentMode.html||body.html(step.content),0===index?contentContainer.prepend(body).prepend(header):getStepPanel(wizard,index-1).after(body).after(header),renderBody(wizard,state,body,index),renderTitle(wizard,options,state,header,index),refreshSteps(wizard,options,state,index),index===state.currentIndex&&refreshStepNavigation(wizard,options,state),refreshPagination(wizard,options,state),wizard}function keyUpHandler(event){var wizard=$(this),options=getOptions(wizard),state=getState(wizard);if(options.suppressPaginationOnFocus&&wizard.find(":focus").is(":input"))return event.preventDefault(),!1;var keyCodes_left=37,keyCodes_right=39;event.keyCode===keyCodes_left?(event.preventDefault(),goToPreviousStep(wizard,options,state)):event.keyCode===keyCodes_right&&(event.preventDefault(),goToNextStep(wizard,options,state))}function loadAsyncContent(wizard,options,state){if(0<state.stepCount){var currentIndex=state.currentIndex,currentStep=getStep(wizard,currentIndex);if(!options.enableContentCache||!currentStep.contentLoaded)switch(getValidEnumValue(contentMode,currentStep.contentMode)){case contentMode.iframe:wizard.find(".content > .body").eq(state.currentIndex).empty().html('<iframe src="'+currentStep.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case contentMode.async:var currentStepContent=getStepPanel(wizard,currentIndex)._aria("busy","true").empty().append(renderTemplate(options.loadingTemplate,{text:options.labels.loading}));$.ajax({url:currentStep.contentUrl,cache:!1}).done(function(data){currentStepContent.empty().html(data)._aria("busy","false").data("loaded","1"),wizard.triggerHandler("contentLoaded",[currentIndex])})}}}function paginationClick(wizard,options,state,index){var oldIndex=state.currentIndex;if(0<=index&&index<state.stepCount&&!(options.forceMoveForward&&index<state.currentIndex)){var anchor=getStepAnchor(wizard,index),parent=anchor.parent(),isDisabled=parent.hasClass("disabled");return parent._enableAria(),anchor.click(),oldIndex!==state.currentIndex||!isDisabled||(parent._enableAria(!1),!1)}return!1}function paginationClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),href=anchor.attr("href");switch(href.substring(href.lastIndexOf("#")+1)){case"cancel":!function(wizard){wizard.triggerHandler("canceled")}(wizard);break;case"finish":finishStep(wizard,state);break;case"next":goToNextStep(wizard,options,state);break;case"previous":goToPreviousStep(wizard,options,state)}}function refreshPagination(wizard,options,state){if(options.enablePagination){var finish=wizard.find(".actions a[href$='#finish']").parent(),next=wizard.find(".actions a[href$='#next']").parent();if(!options.forceMoveForward)wizard.find(".actions a[href$='#previous']").parent()._enableAria(0<state.currentIndex);options.enableFinishButton&&options.showFinishButtonAlways?(finish._enableAria(0<state.stepCount),next._enableAria(1<state.stepCount&&state.stepCount>state.currentIndex+1)):(finish._showAria(options.enableFinishButton&&state.stepCount===state.currentIndex+1),next._showAria(0===state.stepCount||state.stepCount>state.currentIndex+1)._enableAria(state.stepCount>state.currentIndex+1||!options.enableFinishButton))}}function refreshStepNavigation(wizard,options,state,oldIndex){var currentOrNewStepAnchor=getStepAnchor(wizard,state.currentIndex),currentInfo=$('<span class="current-info audible">'+options.labels.current+" </span>"),stepTitles=wizard.find(".content > .title");if(null!=oldIndex){var oldStepAnchor=getStepAnchor(wizard,oldIndex);oldStepAnchor.parent().addClass("done").removeClass("error")._selectAria(!1),stepTitles.eq(oldIndex).removeClass("current").next(".body").removeClass("current"),currentInfo=oldStepAnchor.find(".current-info"),currentOrNewStepAnchor.focus()}currentOrNewStepAnchor.prepend(currentInfo).parent()._selectAria().removeClass("done")._enableAria(),stepTitles.eq(state.currentIndex).addClass("current").next(".body").addClass("current")}function refreshSteps(wizard,options,state,index){for(var uniqueId=getUniqueId(wizard),i=index;i<state.stepCount;i++){var uniqueStepId=uniqueId+_tabSuffix+i,uniqueBodyId=uniqueId+_tabpanelSuffix+i,uniqueHeaderId=uniqueId+_titleSuffix+i,title=wizard.find(".title").eq(i)._id(uniqueHeaderId);wizard.find(".steps a").eq(i)._id(uniqueStepId)._aria("controls",uniqueBodyId).attr("href","#"+uniqueHeaderId).html(renderTemplate(options.titleTemplate,{index:i+1,title:title.html()})),wizard.find(".body").eq(i)._id(uniqueBodyId)._aria("labelledby",uniqueHeaderId)}}function removeStep(wizard,options,state,index){return!(index<0||index>=state.stepCount||state.currentIndex===index)&&(function(wizard,index){getSteps(wizard).splice(index,1)}(wizard,index),state.currentIndex>index&&(state.currentIndex--,saveCurrentStateToCookie(wizard,options,state)),state.stepCount--,function(wizard,index){var uniqueId=getUniqueId(wizard);return wizard.find("#"+uniqueId+_titleSuffix+index)}(wizard,index).remove(),getStepPanel(wizard,index).remove(),getStepAnchor(wizard,index).parent().remove(),0===index&&wizard.find(".steps li").first().addClass("first"),index===state.stepCount&&wizard.find(".steps li").eq(index).addClass("last"),refreshSteps(wizard,options,state,index),refreshPagination(wizard,options,state),!0)}function renderBody(wizard,state,body,index){var uniqueId=getUniqueId(wizard),uniqueBodyId=uniqueId+_tabpanelSuffix+index,uniqueHeaderId=uniqueId+_titleSuffix+index;body._id(uniqueBodyId).attr("role","tabpanel")._aria("labelledby",uniqueHeaderId).addClass("body")._showAria(state.currentIndex===index)}function renderTemplate(template,substitutes){for(var matches=template.match(/#([a-z]*)#/gi),i=0;i<matches.length;i++){var match=matches[i],key=match.substring(1,match.length-1);substitutes[key]===undefined&&throwError("The key '{0}' does not exist in the substitute collection!",key),template=template.replace(match,substitutes[key])}return template}function renderTitle(wizard,options,state,header,index){var uniqueId=getUniqueId(wizard),uniqueStepId=uniqueId+_tabSuffix+index,uniqueBodyId=uniqueId+_tabpanelSuffix+index,uniqueHeaderId=uniqueId+_titleSuffix+index,stepCollection=wizard.find(".steps > ul"),title=renderTemplate(options.titleTemplate,{index:index+1,title:header.html()}),stepItem=$('<li role="tab"><a id="'+uniqueStepId+'" href="#'+uniqueHeaderId+'" aria-controls="'+uniqueBodyId+'">'+title+"</a></li>");stepItem._enableAria(options.enableAllSteps||state.currentIndex>index),state.currentIndex>index&&stepItem.addClass("done"),header._id(uniqueHeaderId).attr("tabindex","-1").addClass("title"),0===index?stepCollection.prepend(stepItem):stepCollection.find("li").eq(index-1).after(stepItem),0===index&&stepCollection.find("li").removeClass("first").eq(index).addClass("first"),index===state.stepCount-1&&stepCollection.find("li").removeClass("last").eq(index).addClass("last"),stepItem.children("a").bind("click"+getEventNamespace(wizard),stepClickHandler)}function saveCurrentStateToCookie(wizard,options,state){options.saveState&&$.cookie&&$.cookie(_cookiePrefix+getUniqueId(wizard),state.currentIndex)}function stepClickHandler(event){event.preventDefault();var anchor=$(this),wizard=anchor.parent().parent().parent().parent(),options=getOptions(wizard),state=getState(wizard),oldIndex=state.currentIndex;if(anchor.parent().is(":not(.disabled):not(.current)")){var href=anchor.attr("href");goToStep(wizard,options,state,parseInt(href.substring(href.lastIndexOf("-")+1),0))}if(oldIndex===state.currentIndex)return getStepAnchor(wizard,oldIndex).focus(),!1}function throwError(message){throw 1<arguments.length&&(message=message.format(Array.prototype.slice.call(arguments,1))),new Error(message)}function validateArgument(argumentName,argumentValue){null==argumentValue&&throwError("The argument '{0}' is null or undefined.",argumentName)}$.fn.steps=function(method){return $.fn.steps[method]?$.fn.steps[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.steps"):initialize.apply(this,arguments)},$.fn.steps.add=function(step){var state=getState(this);return insertStep(this,getOptions(this),state,state.stepCount,step)},$.fn.steps.destroy=function(){return function(wizard,options){var eventNamespace=getEventNamespace(wizard);wizard.unbind(eventNamespace).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(eventNamespace),wizard.removeClass(options.clearFixCssClass+" vertical");var contents=wizard.find(".content > *");contents.removeData("loaded").removeData("mode").removeData("url"),contents.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),wizard.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var wizardSubstitute=$('<{0} class="{1}"></{0}>'.format(wizard.get(0).tagName,wizard.attr("class"))),wizardId=wizard._id();return null!=wizardId&&""!==wizardId&&wizardSubstitute._id(wizardId),wizardSubstitute.html(wizard.find(".content").html()),wizard.after(wizardSubstitute),wizard.remove(),wizardSubstitute}(this,getOptions(this))},$.fn.steps.finish=function(){finishStep(this,getState(this))},$.fn.steps.getCurrentIndex=function(){return getState(this).currentIndex},$.fn.steps.getCurrentStep=function(){return getStep(this,getState(this).currentIndex)},$.fn.steps.getStep=function(index){return getStep(this,index)},$.fn.steps.insert=function(index,step){return insertStep(this,getOptions(this),getState(this),index,step)},$.fn.steps.next=function(){return goToNextStep(this,getOptions(this),getState(this))},$.fn.steps.previous=function(){return goToPreviousStep(this,getOptions(this),getState(this))},$.fn.steps.remove=function(index){return removeStep(this,getOptions(this),getState(this),index)},$.fn.steps.setStep=function(index,step){throw new Error("Not yet implemented!")},$.fn.steps.skip=function(count){throw new Error("Not yet implemented!")};var contentMode=$.fn.steps.contentMode={html:0,iframe:1,async:2},stepsOrientation=$.fn.steps.stepsOrientation={horizontal:0,vertical:1},transitionEffect=$.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},stepModel=$.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:contentMode.html,contentLoaded:!1},defaults=$.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:stepsOrientation.horizontal,titleTemplate:'<span class="number">#index#.</span> #title#',loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:transitionEffect.none,transitionEffectSpeed:200,onStepChanging:function(event,currentIndex,newIndex){return!0},onStepChanged:function(event,currentIndex,priorIndex){},onCanceled:function(event){},onFinishing:function(event,currentIndex){return!0},onFinished:function(event,currentIndex){},onContentLoaded:function(event,currentIndex){},onInit:function(event,currentIndex){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next",previous:"Previous",loading:"Loading ..."}}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("jquery")):factory(jQuery)}(function($){$.extend($.fn,{validate:function(options){if(this.length){var validator=$.data(this[0],"validator");return validator||(this.attr("novalidate","novalidate"),validator=new $.validator(options,this[0]),$.data(this[0],"validator",validator),validator.settings.onsubmit&&(this.on("click.validate",":submit",function(event){validator.submitButton=event.currentTarget,$(this).hasClass("cancel")&&(validator.cancelSubmit=!0),void 0!==$(this).attr("formnovalidate")&&(validator.cancelSubmit=!0)}),this.on("submit.validate",function(event){function handle(){var hidden,result;return validator.submitButton&&(validator.settings.submitHandler||validator.formSubmitted)&&(hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)),!validator.settings.submitHandler||(result=validator.settings.submitHandler.call(validator,validator.currentForm,event),hidden&&hidden.remove(),void 0!==result&&result)}return validator.settings.debug&&event.preventDefault(),validator.cancelSubmit?(validator.cancelSubmit=!1,handle()):validator.form()?validator.pendingRequest?!(validator.formSubmitted=!0):handle():(validator.focusInvalid(),!1)})),validator)}options&&options.debug&&window.console},valid:function(){var valid,validator,errorList;return $(this[0]).is("form")?valid=this.validate().form():(errorList=[],valid=!0,validator=$(this[0].form).validate(),this.each(function(){(valid=validator.element(this)&&valid)||(errorList=errorList.concat(validator.errorList))}),validator.errorList=errorList),valid},rules:function(command,argument){var settings,staticRules,existingRules,data,param,filtered,element=this[0];if(null!=element&&(!element.form&&element.hasAttribute("contenteditable")&&(element.form=this.closest("form")[0],element.name=this.attr("name")),null!=element.form)){if(command)switch(staticRules=(settings=$.data(element.form,"validator").settings).rules,existingRules=$.validator.staticRules(element),command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument)),delete existingRules.messages,staticRules[element.name]=existingRules,argument.messages&&(settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages));break;case"remove":return argument?(filtered={},$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method],delete existingRules[method]}),filtered):(delete staticRules[element.name],existingRules)}return(data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element)).required&&(param=data.required,delete data.required,data=$.extend({required:param},data)),data.remote&&(param=data.remote,delete data.remote,data=$.extend(data,{remote:param})),data}}}),$.extend($.expr.pseudos||$.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){var val=$(a).val();return null!==val&&!!$.trim(""+val)},unchecked:function(a){return!$(a).prop("checked")}}),$.validator=function(options,form){this.settings=$.extend(!0,{},$.validator.defaults,options),this.currentForm=form,this.init()},$.validator.format=function(source,params){return 1===arguments.length?function(){var args=$.makeArray(arguments);return args.unshift(source),$.validator.format.apply(this,args)}:(void 0===params||(2<arguments.length&&params.constructor!==Array&&(params=$.makeArray(arguments).slice(1)),params.constructor!==Array&&(params=[params]),$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})})),source)},$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(element){this.lastActive=element,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(element)))},onfocusout:function(element){this.checkable(element)||!(element.name in this.submitted)&&this.optional(element)||this.element(element)},onkeyup:function(element,event){9===event.which&&""===this.elementValue(element)||-1!==$.inArray(event.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(element.name in this.submitted||element.name in this.invalid)&&this.element(element)},onclick:function(element){element.name in this.submitted?this.element(element):element.parentNode.name in this.submitted&&this.element(element.parentNode)},highlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).addClass(errorClass).removeClass(validClass):$(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){"radio"===element.type?this.findByName(element.name).removeClass(errorClass).addClass(validClass):$(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),step:$.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm),this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var rules,groups=this.groups={};function delegate(event){!this.form&&this.hasAttribute("contenteditable")&&(this.form=$(this).closest("form")[0],this.name=$(this).attr("name"));var validator=$.data(this.form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;settings[eventType]&&!$(this).is(settings.ignore)&&settings[eventType].call(validator,this,event)}$.each(this.settings.groups,function(key,value){"string"==typeof value&&(value=value.split(/\s/)),$.each(value,function(index,name){groups[name]=key})}),rules=this.settings.rules,$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)}),$(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",delegate).on("click.validate","select, option, [type='radio'], [type='checkbox']",delegate),this.settings.invalidHandler&&$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),$.extend(this.submitted,this.errorMap),this.invalid=$.extend({},this.errorMap),this.valid()||$(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},element:function(element){var rs,group,cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),v=this,result=!0;return void 0===checkElement?delete this.invalid[cleanElement.name]:(this.prepareElement(checkElement),this.currentElements=$(checkElement),(group=this.groups[checkElement.name])&&$.each(this.groups,function(name,testgroup){testgroup===group&&name!==checkElement.name&&(cleanElement=v.validationTargetFor(v.clean(v.findByName(name))))&&cleanElement.name in v.invalid&&(v.currentElements.push(cleanElement),result=v.check(cleanElement)&&result)}),rs=!1!==this.check(checkElement),result=result&&rs,this.invalid[checkElement.name]=!rs,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),$(element).attr("aria-invalid",!rs)),result},showErrors:function(errors){if(errors){var validator=this;$.extend(this.errorMap,errors),this.errorList=$.map(this.errorMap,function(message,name){return{message:message,element:validator.findByName(name)[0]}}),this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){$.fn.resetForm&&$(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var elements=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(elements)},resetElements:function(elements){var i;if(this.settings.unhighlight)for(i=0;elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,""),this.findByName(elements[i].name).removeClass(this.settings.validClass);else elements.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var i,count=0;for(i in obj)void 0!==obj[i]&&null!==obj[i]&&!1!==obj[i]&&count++;return count},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(errors){errors.not(this.containers).text(""),this.addWrapper(errors).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&1===$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var name=this.name||$(this).attr("name");return!name&&validator.settings.debug&&window.console,this.hasAttribute("contenteditable")&&(this.form=$(this).closest("form")[0],this.name=name),!(name in rulesCache||!validator.objectLength($(this).rules()))&&(rulesCache[name]=!0)})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=$([]),this.toHide=$([])},reset:function(){this.resetInternals(),this.currentElements=$([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset(),this.toHide=this.errorsFor(element)},elementValue:function(element){var val,idx,$element=$(element),type=element.type;return"radio"===type||"checkbox"===type?this.findByName(element.name).filter(":checked").val():"number"===type&&void 0!==element.validity?element.validity.badInput?"NaN":$element.val():(val=element.hasAttribute("contenteditable")?$element.text():$element.val(),"file"===type?"C:\\fakepath\\"===val.substr(0,12)?val.substr(12):0<=(idx=val.lastIndexOf("/"))?val.substr(idx+1):0<=(idx=val.lastIndexOf("\\"))?val.substr(idx+1):val:"string"==typeof val?val.replace(/\r/g,""):val)},check:function(element){element=this.validationTargetFor(this.clean(element));var result,method,rule,normalizer,rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i}).length,dependencyMismatch=!1,val=this.elementValue(element);if("function"==typeof rules.normalizer?normalizer=rules.normalizer:"function"==typeof this.settings.normalizer&&(normalizer=this.settings.normalizer),normalizer){if("string"!=typeof(val=normalizer.call(element,val)))throw new TypeError("The normalizer should return a string value.");delete rules.normalizer}for(method in rules){rule={method:method,parameters:rules[method]};try{if("dependency-mismatch"===(result=$.validator.methods[method].call(this,val,element,rule.parameters))&&1===rulesCount){dependencyMismatch=!0;continue}if(dependencyMismatch=!1,"pending"===result)return void(this.toHide=this.toHide.not(this.errorsFor(element)));if(!result)return this.formatAndAdd(element,rule),!1}catch(e){throw this.settings.debug&&window.console,e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method."),e}}if(!dependencyMismatch)return this.objectLength(rules)&&this.successList.push(element),!0},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase())||$(element).data("msg")},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]},defaultMessage:function(element,rule){"string"==typeof rule&&(rule={method:rule});var message=this.findDefined(this.customMessage(element.name,rule.method),this.customDataMessage(element,rule.method),!this.settings.ignoreTitle&&element.title||void 0,$.validator.messages[rule.method],"<strong>Warning: No message defined for "+element.name+"</strong>"),theregex=/\$?\{(\d+)\}/g;return"function"==typeof message?message=message.call(this,rule.parameters,element):theregex.test(message)&&(message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)),message},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule);this.errorList.push({message:message,element:element,method:rule.method}),this.errorMap[element.name]=message,this.submitted[element.name]=message},addWrapper:function(toToggle){return this.settings.wrapper&&(toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))),toToggle},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++)error=this.errorList[i],this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass),this.showLabel(error.element,error.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var place,group,errorID,v,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");error.length?(error.removeClass(this.settings.validClass).addClass(this.settings.errorClass),error.html(message)):(place=error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||""),this.settings.wrapper&&(place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(place):this.settings.errorPlacement?this.settings.errorPlacement.call(this,place,$(element)):place.insertAfter(element),error.is("label")?error.attr("for",elementID):0===error.parents("label[for='"+this.escapeCssMeta(elementID)+"']").length&&(errorID=error.attr("id"),describedBy?describedBy.match(new RegExp("\\b"+this.escapeCssMeta(errorID)+"\\b"))||(describedBy+=" "+errorID):describedBy=errorID,$(element).attr("aria-describedby",describedBy),(group=this.groups[element.name])&&(v=this,$.each(v.groups,function(name,testgroup){testgroup===group&&$("[name='"+v.escapeCssMeta(name)+"']",v.currentForm).attr("aria-describedby",error.attr("id"))})))),!message&&this.settings.success&&(error.text(""),"string"==typeof this.settings.success?error.addClass(this.settings.success):this.settings.success(error,element)),this.toShow=this.toShow.add(error)},errorsFor:function(element){var name=this.escapeCssMeta(this.idOrName(element)),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";return describer&&(selector=selector+", #"+this.escapeCssMeta(describer).replace(/\s+/g,", #")),this.errors().filter(selector)},escapeCssMeta:function(string){return string.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){return this.checkable(element)&&(element=this.findByName(element.name)),$(element).not(this.settings.ignore)[0]},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+this.escapeCssMeta(name)+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return!this.dependTypes[typeof param]||this.dependTypes[typeof param](param,element)},dependTypes:{boolean:function(param){return param},string:function(param,element){return!!$(param,element.form).length},function:function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){this.pending[element.name]||(this.pendingRequest++,$(element).addClass(this.settings.pendingClass),this.pending[element.name]=!0)},stopRequest:function(element,valid){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[element.name],$(element).removeClass(this.settings.pendingClass),valid&&0===this.pendingRequest&&this.formSubmitted&&this.form()?($(this.currentForm).submit(),this.submitButton&&$("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!valid&&0===this.pendingRequest&&this.formSubmitted&&($(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(element,method){return method="string"==typeof method&&method||"remote",$.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:!0,message:this.defaultMessage(element,{method:method})})},destroy:function(){this.resetForm(),$(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(className,rules){className.constructor===String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className)},classRules:function(element){var rules={},classes=$(element).attr("class");return classes&&$.each(classes.split(" "),function(){this in $.validator.classRuleSettings&&$.extend(rules,$.validator.classRuleSettings[this])}),rules},normalizeAttributeRule:function(rules,type,method,value){/min|max|step/.test(method)&&(null===type||/number|range|text/.test(type))&&(value=Number(value),isNaN(value)&&(value=void 0)),value||0===value?rules[method]=value:type===method&&"range"!==type&&(rules[method]=!0)},attributeRules:function(element){var method,value,rules={},$element=$(element),type=element.getAttribute("type");for(method in $.validator.methods)"required"===method?(""===(value=element.getAttribute(method))&&(value=!0),value=!!value):value=$element.attr(method),this.normalizeAttributeRule(rules,type,method,value);return rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)&&delete rules.maxlength,rules},dataRules:function(element){var method,value,rules={},$element=$(element),type=element.getAttribute("type");for(method in $.validator.methods)value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase()),this.normalizeAttributeRule(rules,type,method,value);return rules},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");return validator.settings.rules&&(rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}),rules},normalizeRules:function(rules,element){return $.each(rules,function(prop,val){if(!1!==val){if(val.param||val.depends){var keepRule=!0;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element)}keepRule?rules[prop]=void 0===val.param||val.param:($.data(element.form,"validator").resetElements($(element)),delete rules[prop])}}else delete rules[prop]}),$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)&&"normalizer"!==rule?parameter(element):parameter}),$.each(["minlength","maxlength"],function(){rules[this]&&(rules[this]=Number(rules[this]))}),$.each(["rangelength","range"],function(){var parts;rules[this]&&($.isArray(rules[this])?rules[this]=[Number(rules[this][0]),Number(rules[this][1])]:"string"==typeof rules[this]&&(parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/),rules[this]=[Number(parts[0]),Number(parts[1])]))}),$.validator.autoCreateRanges&&(null!=rules.min&&null!=rules.max&&(rules.range=[rules.min,rules.max],delete rules.min,delete rules.max),null!=rules.minlength&&null!=rules.maxlength&&(rules.rangelength=[rules.minlength,rules.maxlength],delete rules.minlength,delete rules.maxlength)),rules},normalizeRule:function(data){if("string"==typeof data){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=!0}),data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method,$.validator.messages[name]=void 0!==message?message:$.validator.messages[name],method.length<3&&$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,param){if(!this.depend(param,element))return"dependency-mismatch";if("select"===element.nodeName.toLowerCase()){var val=$(element).val();return val&&0<val.length}return this.checkable(element)?0<this.getLength(value,element):0<value.length},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)},url:function(value,element){return this.optional(element)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)},number:function(value,element){return this.optional(element)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||param<=length},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||param<=value},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},step:function(value,element,param){var decimals,type=$(element).attr("type"),errorMessage="Step attribute on input type "+type+" is not supported.",re=new RegExp("\\b"+type+"\\b"),decimalPlaces=function(num){var match=(""+num).match(/(?:\.(\d+))?$/);return match&&match[1]?match[1].length:0},toInt=function(num){return Math.round(num*Math.pow(10,decimals))},valid=!0;if(type&&!re.test(["text","number","range"].join()))throw new Error(errorMessage);return decimals=decimalPlaces(param),(decimalPlaces(value)>decimals||toInt(value)%toInt(param)!=0)&&(valid=!1),this.optional(element)||valid},equalTo:function(value,element,param){var target=$(param);return this.settings.onfocusout&&target.not(".validate-equalTo-blur").length&&target.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){$(element).valid()}),value===target.val()},remote:function(value,element,param,method){if(this.optional(element))return"dependency-mismatch";method="string"==typeof method&&method||"remote";var validator,data,optionDataString,previous=this.previousValue(element,method);return this.settings.messages[element.name]||(this.settings.messages[element.name]={}),previous.originalMessage=previous.originalMessage||this.settings.messages[element.name][method],this.settings.messages[element.name][method]=previous.message,param="string"==typeof param&&{url:param}||param,optionDataString=$.param($.extend({data:value},param.data)),previous.old===optionDataString?previous.valid:(previous.old=optionDataString,(validator=this).startRequest(element),(data={})[element.name]=value,$.ajax($.extend(!0,{mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var errors,message,submitted,valid=!0===response||"true"===response;validator.settings.messages[element.name][method]=previous.originalMessage,valid?(submitted=validator.formSubmitted,validator.resetInternals(),validator.toHide=validator.errorsFor(element),validator.formSubmitted=submitted,validator.successList.push(element),validator.invalid[element.name]=!1,validator.showErrors()):(errors={},message=response||validator.defaultMessage(element,{method:method,parameters:value}),errors[element.name]=previous.message=message,validator.invalid[element.name]=!0,validator.showErrors(errors)),previous.valid=valid,validator.stopRequest(element,valid)}},param)),"pending")}}});var ajax,pendingRequests={};return $.ajaxPrefilter?$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;"abort"===settings.mode&&(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=xhr)}):(ajax=$.ajax,$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;return"abort"===mode?(pendingRequests[port]&&pendingRequests[port].abort(),pendingRequests[port]=ajax.apply(this,arguments),pendingRequests[port]):ajax.apply(this,arguments)}),$}),function(window,factory){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(jQuery){return factory(window,jQuery)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("jquery")):window.jQueryBridget=factory(window,window.jQuery)}(window,function(window,jQuery){"use strict";var arraySlice=Array.prototype.slice,console=window.console,logError=void 0===console?function(){}:function(message){console.error(message)};function jQueryBridget(namespace,PluginClass,$){($=$||jQuery||window.jQuery)&&(PluginClass.prototype.option||(PluginClass.prototype.option=function(opts){$.isPlainObject(opts)&&(this.options=$.extend(!0,this.options,opts))}),$.fn[namespace]=function(arg0){var options;return"string"==typeof arg0?function($elems,methodName,args){var returnValue,pluginMethodStr="$()."+namespace+'("'+methodName+'")';return $elems.each(function(i,elem){var instance=$.data(elem,namespace);if(instance){var method=instance[methodName];if(method&&"_"!=methodName.charAt(0)){var value=method.apply(instance,args);returnValue=void 0===returnValue?value:returnValue}else logError(pluginMethodStr+" is not a valid method")}else logError(namespace+" not initialized. Cannot call methods, i.e. "+pluginMethodStr)}),void 0!==returnValue?returnValue:$elems}(this,arg0,arraySlice.call(arguments,1)):(options=arg0,this.each(function(i,elem){var instance=$.data(elem,namespace);instance?(instance.option(options),instance._init()):(instance=new PluginClass(elem,options),$.data(elem,namespace,instance))}),this)},updateJQuery($))}function updateJQuery($){!$||$&&$.bridget||($.bridget=jQueryBridget)}return updateJQuery(jQuery||window.jQuery),jQueryBridget}),function(global,factory){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",factory):"object"==typeof module&&module.exports?module.exports=factory():global.EvEmitter=factory()}("undefined"!=typeof window?window:this,function(){function EvEmitter(){}var proto=EvEmitter.prototype;return proto.on=function(eventName,listener){if(eventName&&listener){var events=this._events=this._events||{},listeners=events[eventName]=events[eventName]||[];return-1==listeners.indexOf(listener)&&listeners.push(listener),this}},proto.once=function(eventName,listener){if(eventName&&listener){this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};return(onceEvents[eventName]=onceEvents[eventName]||{})[listener]=!0,this}},proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){var index=listeners.indexOf(listener);return-1!=index&&listeners.splice(index,1),this}},proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){listeners=listeners.slice(0),args=args||[];for(var onceListeners=this._onceEvents&&this._onceEvents[eventName],i=0;i<listeners.length;i++){var listener=listeners[i];onceListeners&&onceListeners[listener]&&(this.off(eventName,listener),delete onceListeners[listener]),listener.apply(this,args)}return this}},proto.allOff=function(){delete this._events,delete this._onceEvents},EvEmitter}),function(window,factory){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return factory()}):"object"==typeof module&&module.exports?module.exports=factory():window.getSize=factory()}(window,function(){"use strict";function getStyleSize(value){var num=parseFloat(value);return-1==value.indexOf("%")&&!isNaN(num)&&num}var logError="undefined"==typeof console?function(){}:function(message){},measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],measurementsLength=measurements.length;function getStyle(elem){var style=getComputedStyle(elem);return style||logError("Style returned "+style+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),style}var isBoxSizeOuter,isSetup=!1;function getSize(elem){if(function(){if(!isSetup){isSetup=!0;var div=document.createElement("div");div.style.width="200px",div.style.padding="1px 2px 3px 4px",div.style.borderStyle="solid",div.style.borderWidth="1px 2px 3px 4px",div.style.boxSizing="border-box";var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);getSize.isBoxSizeOuter=isBoxSizeOuter=200==getStyleSize(style.width),body.removeChild(div)}}(),"string"==typeof elem&&(elem=document.querySelector(elem)),elem&&"object"==typeof elem&&elem.nodeType){var style=getStyle(elem);if("none"==style.display)return function(){for(var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0;i<measurementsLength;i++)size[measurements[i]]=0;return size}();var size={};size.width=elem.offsetWidth,size.height=elem.offsetHeight;for(var isBorderBox=size.isBorderBox="border-box"==style.boxSizing,i=0;i<measurementsLength;i++){var measurement=measurements[i],value=style[measurement],num=parseFloat(value);size[measurement]=isNaN(num)?0:num}var paddingWidth=size.paddingLeft+size.paddingRight,paddingHeight=size.paddingTop+size.paddingBottom,marginWidth=size.marginLeft+size.marginRight,marginHeight=size.marginTop+size.marginBottom,borderWidth=size.borderLeftWidth+size.borderRightWidth,borderHeight=size.borderTopWidth+size.borderBottomWidth,isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter,styleWidth=getStyleSize(style.width);!1!==styleWidth&&(size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth));var styleHeight=getStyleSize(style.height);return!1!==styleHeight&&(size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)),size.innerWidth=size.width-(paddingWidth+borderWidth),size.innerHeight=size.height-(paddingHeight+borderHeight),size.outerWidth=size.width+marginWidth,size.outerHeight=size.height+marginHeight,size}}return getSize}),function(window,factory){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",factory):"object"==typeof module&&module.exports?module.exports=factory():window.matchesSelector=factory()}(window,function(){"use strict";var matchesMethod=function(){var ElemProto=window.Element.prototype;if(ElemProto.matches)return"matches";if(ElemProto.matchesSelector)return"matchesSelector";for(var prefixes=["webkit","moz","ms","o"],i=0;i<prefixes.length;i++){var method=prefixes[i]+"MatchesSelector";if(ElemProto[method])return method}}();return function(elem,selector){return elem[matchesMethod](selector)}}),function(window,factory){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(matchesSelector){return factory(window,matchesSelector)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("desandro-matches-selector")):window.fizzyUIUtils=factory(window,window.matchesSelector)}(window,function(window,matchesSelector){var utils={extend:function(a,b){for(var prop in b)a[prop]=b[prop];return a},modulo:function(num,div){return(num%div+div)%div},makeArray:function(obj){var ary=[];if(Array.isArray(obj))ary=obj;else if(obj&&"object"==typeof obj&&"number"==typeof obj.length)for(var i=0;i<obj.length;i++)ary.push(obj[i]);else ary.push(obj);return ary},removeFrom:function(ary,obj){var index=ary.indexOf(obj);-1!=index&&ary.splice(index,1)},getParent:function(elem,selector){for(;elem.parentNode&&elem!=document.body;)if(elem=elem.parentNode,matchesSelector(elem,selector))return elem},getQueryElement:function(elem){return"string"==typeof elem?document.querySelector(elem):elem},handleEvent:function(event){var method="on"+event.type;this[method]&&this[method](event)},filterFindElements:function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];return elems.forEach(function(elem){if(elem instanceof HTMLElement)if(selector){matchesSelector(elem,selector)&&ffElems.push(elem);for(var childElems=elem.querySelectorAll(selector),i=0;i<childElems.length;i++)ffElems.push(childElems[i])}else ffElems.push(elem)}),ffElems},debounceMethod:function(_class,methodName,threshold){var method=_class.prototype[methodName],timeoutName=methodName+"Timeout";_class.prototype[methodName]=function(){var timeout=this[timeoutName];timeout&&clearTimeout(timeout);var args=arguments,_this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args),delete _this[timeoutName]},threshold||100)}},docReady:function(callback){var readyState=document.readyState;"complete"==readyState||"interactive"==readyState?setTimeout(callback):document.addEventListener("DOMContentLoaded",callback)},toDashed:function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()}},console=window.console;return utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace),dataAttr="data-"+dashedNamespace,dataAttrElems=document.querySelectorAll("["+dataAttr+"]"),jsDashElems=document.querySelectorAll(".js-"+dashedNamespace),elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems)),dataOptionsAttr=dataAttr+"-options",jQuery=window.jQuery;elems.forEach(function(elem){var options,attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr);try{options=attr&&JSON.parse(attr)}catch(error){return void(console&&console.error("Error parsing "+dataAttr+" on "+elem.className+": "+error))}var instance=new WidgetClass(elem,options);jQuery&&jQuery.data(elem,namespace,instance)})})},utils}),function(window,factory){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("ev-emitter"),require("get-size")):(window.Outlayer={},window.Outlayer.Item=factory(window.EvEmitter,window.getSize))}(window,function(EvEmitter,getSize){"use strict";var docElemStyle=document.documentElement.style,transitionProperty="string"==typeof docElemStyle.transition?"transition":"WebkitTransition",transformProperty="string"==typeof docElemStyle.transform?"transform":"WebkitTransform",transitionEndEvent={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[transitionProperty],vendorProperties={transform:transformProperty,transition:transitionProperty,transitionDuration:transitionProperty+"Duration",transitionProperty:transitionProperty+"Property",transitionDelay:transitionProperty+"Delay"};function Item(element,layout){element&&(this.element=element,this.layout=layout,this.position={x:0,y:0},this._create())}var proto=Item.prototype=Object.create(EvEmitter.prototype);proto.constructor=Item,proto._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},proto.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},proto.getSize=function(){this.size=getSize(this.element)},proto.css=function(style){var elemStyle=this.element.style;for(var prop in style){elemStyle[vendorProperties[prop]||prop]=style[prop]}},proto.getPosition=function(){var style=getComputedStyle(this.element),isOriginLeft=this.layout._getOption("originLeft"),isOriginTop=this.layout._getOption("originTop"),xValue=style[isOriginLeft?"left":"right"],yValue=style[isOriginTop?"top":"bottom"],layoutSize=this.layout.size,x=-1!=xValue.indexOf("%")?parseFloat(xValue)/100*layoutSize.width:parseInt(xValue,10),y=-1!=yValue.indexOf("%")?parseFloat(yValue)/100*layoutSize.height:parseInt(yValue,10);x=isNaN(x)?0:x,y=isNaN(y)?0:y,x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight,y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom,this.position.x=x,this.position.y=y},proto.layoutPosition=function(){var layoutSize=this.layout.size,style={},isOriginLeft=this.layout._getOption("originLeft"),isOriginTop=this.layout._getOption("originTop"),xPadding=isOriginLeft?"paddingLeft":"paddingRight",xProperty=isOriginLeft?"left":"right",xResetProperty=isOriginLeft?"right":"left",x=this.position.x+layoutSize[xPadding];style[xProperty]=this.getXValue(x),style[xResetProperty]="";var yPadding=isOriginTop?"paddingTop":"paddingBottom",yProperty=isOriginTop?"top":"bottom",yResetProperty=isOriginTop?"bottom":"top",y=this.position.y+layoutSize[yPadding];style[yProperty]=this.getYValue(y),style[yResetProperty]="",this.css(style),this.emitEvent("layout",[this])},proto.getXValue=function(x){var isHorizontal=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!isHorizontal?x/this.layout.size.width*100+"%":x+"px"},proto.getYValue=function(y){var isHorizontal=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&isHorizontal?y/this.layout.size.height*100+"%":y+"px"},proto._transitionTo=function(x,y){this.getPosition();var curX=this.position.x,curY=this.position.y,compareX=parseInt(x,10),compareY=parseInt(y,10),didNotMove=compareX===this.position.x&&compareY===this.position.y;if(this.setPosition(x,y),!didNotMove||this.isTransitioning){var transX=x-curX,transY=y-curY,transitionStyle={};transitionStyle.transform=this.getTranslate(transX,transY),this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},proto.getTranslate=function(x,y){return"translate3d("+(x=this.layout._getOption("originLeft")?x:-x)+"px, "+(y=this.layout._getOption("originTop")?y:-y)+"px, 0)"},proto.goTo=function(x,y){this.setPosition(x,y),this.layoutPosition()},proto.moveTo=proto._transitionTo,proto.setPosition=function(x,y){this.position.x=parseInt(x,10),this.position.y=parseInt(y,10)},proto._nonTransition=function(args){for(var prop in this.css(args.to),args.isCleaning&&this._removeStyles(args.to),args.onTransitionEnd)args.onTransitionEnd[prop].call(this)},proto.transition=function(args){if(parseFloat(this.layout.options.transitionDuration)){var _transition=this._transn;for(var prop in args.onTransitionEnd)_transition.onEnd[prop]=args.onTransitionEnd[prop];for(prop in args.to)_transition.ingProperties[prop]=!0,args.isCleaning&&(_transition.clean[prop]=!0);if(args.from){this.css(args.from);this.element.offsetHeight;null}this.enableTransition(args.to),this.css(args.to),this.isTransitioning=!0}else this._nonTransition(args)};var transitionProps="opacity,"+transformProperty.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()});proto.enableTransition=function(){if(!this.isTransitioning){var duration=this.layout.options.transitionDuration;duration="number"==typeof duration?duration+"ms":duration,this.css({transitionProperty:transitionProps,transitionDuration:duration,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(transitionEndEvent,this,!1)}},proto.onwebkitTransitionEnd=function(event){this.ontransitionend(event)},proto.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={"-webkit-transform":"transform"};proto.ontransitionend=function(event){if(event.target===this.element){var _transition=this._transn,propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;if(delete _transition.ingProperties[propertyName],function(obj){for(var prop in obj)return!1;return!0}(_transition.ingProperties)&&this.disableTransition(),propertyName in _transition.clean&&(this.element.style[event.propertyName]="",delete _transition.clean[propertyName]),propertyName in _transition.onEnd)_transition.onEnd[propertyName].call(this),delete _transition.onEnd[propertyName];this.emitEvent("transitionEnd",[this])}},proto.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(transitionEndEvent,this,!1),this.isTransitioning=!1},proto._removeStyles=function(style){var cleanStyle={};for(var prop in style)cleanStyle[prop]="";this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:"",transitionDuration:"",transitionDelay:""};return proto.removeTransitionStyles=function(){this.css(cleanTransitionStyle)},proto.stagger=function(delay){delay=isNaN(delay)?0:delay,this.staggerDelay=delay+"ms"},proto.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},proto.remove=function(){transitionProperty&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},proto.reveal=function(){delete this.isHidden,this.css({display:""});var options=this.layout.options,onTransitionEnd={};onTransitionEnd[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:!0,onTransitionEnd:onTransitionEnd})},proto.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},proto.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity)return"opacity";for(var prop in optionStyle)return prop},proto.hide=function(){this.isHidden=!0,this.css({display:""});var options=this.layout.options,onTransitionEnd={};onTransitionEnd[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:!0,onTransitionEnd:onTransitionEnd})},proto.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},proto.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},Item}),function(window,factory){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(EvEmitter,getSize,utils,Item){return factory(window,EvEmitter,getSize,utils,Item)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):window.Outlayer=factory(window,window.EvEmitter,window.getSize,window.fizzyUIUtils,window.Outlayer.Item)}(window,function(window,EvEmitter,getSize,utils,Item){"use strict";var console=window.console,jQuery=window.jQuery,noop=function(){},GUID=0,instances={};function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(queryElement){this.element=queryElement,jQuery&&(this.$element=jQuery(this.element)),this.options=utils.extend({},this.constructor.defaults),this.option(options);var id=++GUID;this.element.outlayerGUID=id,(instances[id]=this)._create(),this._getOption("initLayout")&&this.layout()}else console&&console.error("Bad element for "+this.constructor.namespace+": "+(queryElement||element))}Outlayer.namespace="outlayer",Outlayer.Item=Item,Outlayer.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var proto=Outlayer.prototype;function subclass(Parent){function SubClass(){Parent.apply(this,arguments)}return(SubClass.prototype=Object.create(Parent.prototype)).constructor=SubClass}utils.extend(proto,EvEmitter.prototype),proto.option=function(opts){utils.extend(this.options,opts)},proto._getOption=function(option){var oldOption=this.constructor.compatOptions[option];return oldOption&&void 0!==this.options[oldOption]?this.options[oldOption]:this.options[option]},Outlayer.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},proto._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),utils.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},proto.reloadItems=function(){this.items=this._itemize(this.element.children)},proto._itemize=function(elems){for(var itemElems=this._filterFindItemElements(elems),Item=this.constructor.Item,items=[],i=0;i<itemElems.length;i++){var item=new Item(itemElems[i],this);items.push(item)}return items},proto._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector)},proto.getItemElements=function(){return this.items.map(function(item){return item.element})},proto.layout=function(){this._resetLayout(),this._manageStamps();var layoutInstant=this._getOption("layoutInstant"),isInstant=void 0!==layoutInstant?layoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant),this._isLayoutInited=!0},proto._init=proto.layout,proto._resetLayout=function(){this.getSize()},proto.getSize=function(){this.size=getSize(this.element)},proto._getMeasurement=function(measurement,size){var elem,option=this.options[measurement];option?("string"==typeof option?elem=this.element.querySelector(option):option instanceof HTMLElement&&(elem=option),this[measurement]=elem?getSize(elem)[size]:option):this[measurement]=0},proto.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items),this._layoutItems(items,isInstant),this._postLayout()},proto._getItemsForLayout=function(items){return items.filter(function(item){return!item.isIgnored})},proto._layoutItems=function(items,isInstant){if(this._emitCompleteOnItems("layout",items),items&&items.length){var queue=[];items.forEach(function(item){var position=this._getItemLayoutPosition(item);position.item=item,position.isInstant=isInstant||item.isLayoutInstant,queue.push(position)},this),this._processLayoutQueue(queue)}},proto._getItemLayoutPosition=function(){return{x:0,y:0}},proto._processLayoutQueue=function(queue){this.updateStagger(),queue.forEach(function(obj,i){this._positionItem(obj.item,obj.x,obj.y,obj.isInstant,i)},this)},proto.updateStagger=function(){var stagger=this.options.stagger;if(null!=stagger)return this.stagger=function(time){if("number"==typeof time)return time;var matches=time.match(/(^\d*\.?\d*)(\w*)/),num=matches&&matches[1],unit=matches&&matches[2];if(!num.length)return 0;num=parseFloat(num);var mult=msUnits[unit]||1;return num*mult}(stagger),this.stagger;this.stagger=0},proto._positionItem=function(item,x,y,isInstant,i){isInstant?item.goTo(x,y):(item.stagger(i*this.stagger),item.moveTo(x,y))},proto._postLayout=function(){this.resizeContainer()},proto.resizeContainer=function(){if(this._getOption("resizeContainer")){var size=this._getContainerSize();size&&(this._setContainerMeasure(size.width,!0),this._setContainerMeasure(size.height,!1))}},proto._getContainerSize=noop,proto._setContainerMeasure=function(measure,isWidth){if(void 0!==measure){var elemSize=this.size;elemSize.isBorderBox&&(measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth),measure=Math.max(measure,0),this.element.style[isWidth?"width":"height"]=measure+"px"}},proto._emitCompleteOnItems=function(eventName,items){var _this=this;function onComplete(){_this.dispatchEvent(eventName+"Complete",null,[items])}var count=items.length;if(items&&count){var doneCount=0;items.forEach(function(item){item.once(eventName,tick)})}else onComplete();function tick(){++doneCount==count&&onComplete()}},proto.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;if(this.emitEvent(type,emitArgs),jQuery)if(this.$element=this.$element||jQuery(this.element),event){var $event=jQuery.Event(event);$event.type=type,this.$element.trigger($event,args)}else this.$element.trigger(type,args)},proto.ignore=function(elem){var item=this.getItem(elem);item&&(item.isIgnored=!0)},proto.unignore=function(elem){var item=this.getItem(elem);item&&delete item.isIgnored},proto.stamp=function(elems){(elems=this._find(elems))&&(this.stamps=this.stamps.concat(elems),elems.forEach(this.ignore,this))},proto.unstamp=function(elems){(elems=this._find(elems))&&elems.forEach(function(elem){utils.removeFrom(this.stamps,elem),this.unignore(elem)},this)},proto._find=function(elems){if(elems)return"string"==typeof elems&&(elems=this.element.querySelectorAll(elems)),elems=utils.makeArray(elems)},proto._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},proto._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect(),size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}},proto._manageStamp=noop,proto._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect(),thisRect=this._boundingRect,size=getSize(elem);return{left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom}},proto.handleEvent=utils.handleEvent,proto.bindResize=function(){window.addEventListener("resize",this),this.isResizeBound=!0},proto.unbindResize=function(){window.removeEventListener("resize",this),this.isResizeBound=!1},proto.onresize=function(){this.resize()},utils.debounceMethod(Outlayer,"onresize",100),proto.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},proto.needsResizeLayout=function(){var size=getSize(this.element);return this.size&&size&&size.innerWidth!==this.size.innerWidth},proto.addItems=function(elems){var items=this._itemize(elems);return items.length&&(this.items=this.items.concat(items)),items},proto.appended=function(elems){var items=this.addItems(elems);items.length&&(this.layoutItems(items,!0),this.reveal(items))},proto.prepended=function(elems){var items=this._itemize(elems);if(items.length){var previousItems=this.items.slice(0);this.items=items.concat(previousItems),this._resetLayout(),this._manageStamps(),this.layoutItems(items,!0),this.reveal(items),this.layoutItems(previousItems)}},proto.reveal=function(items){if(this._emitCompleteOnItems("reveal",items),items&&items.length){var stagger=this.updateStagger();items.forEach(function(item,i){item.stagger(i*stagger),item.reveal()})}},proto.hide=function(items){if(this._emitCompleteOnItems("hide",items),items&&items.length){var stagger=this.updateStagger();items.forEach(function(item,i){item.stagger(i*stagger),item.hide()})}},proto.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items)},proto.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items)},proto.getItem=function(elem){for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.element==elem)return item}},proto.getItems=function(elems){elems=utils.makeArray(elems);var items=[];return elems.forEach(function(elem){var item=this.getItem(elem);item&&items.push(item)},this),items},proto.remove=function(elems){var removeItems=this.getItems(elems);this._emitCompleteOnItems("remove",removeItems),removeItems&&removeItems.length&&removeItems.forEach(function(item){item.remove(),utils.removeFrom(this.items,item)},this)},proto.destroy=function(){var style=this.element.style;style.height="",style.position="",style.width="",this.items.forEach(function(item){item.destroy()}),this.unbindResize();var id=this.element.outlayerGUID;delete instances[id],delete this.element.outlayerGUID,jQuery&&jQuery.removeData(this.element,this.constructor.namespace)},Outlayer.data=function(elem){var id=(elem=utils.getQueryElement(elem))&&elem.outlayerGUID;return id&&instances[id]},Outlayer.create=function(namespace,options){var Layout=subclass(Outlayer);return Layout.defaults=utils.extend({},Outlayer.defaults),utils.extend(Layout.defaults,options),Layout.compatOptions=utils.extend({},Outlayer.compatOptions),Layout.namespace=namespace,Layout.data=Outlayer.data,Layout.Item=subclass(Item),utils.htmlInit(Layout,namespace),jQuery&&jQuery.bridget&&jQuery.bridget(namespace,Layout),Layout};var msUnits={ms:1,s:1e3};return Outlayer.Item=Item,Outlayer}),function(window,factory){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("outlayer"),require("get-size")):window.Masonry=factory(window.Outlayer,window.getSize)}(window,function(Outlayer,getSize){var Masonry=Outlayer.create("masonry");Masonry.compatOptions.fitWidth="isFitWidth";var proto=Masonry.prototype;return proto._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var i=0;i<this.cols;i++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},proto.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var firstItem=this.items[0],firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}var columnWidth=this.columnWidth+=this.gutter,containerWidth=this.containerWidth+this.gutter,cols=containerWidth/columnWidth,excess=columnWidth-containerWidth%columnWidth;cols=Math[excess&&excess<1?"round":"floor"](cols),this.cols=Math.max(cols,1)},proto.getContainerWidth=function(){var container=this._getOption("fitWidth")?this.element.parentNode:this.element,size=getSize(container);this.containerWidth=size&&size.innerWidth},proto._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth,colSpan=Math[remainder&&remainder<1?"round":"ceil"](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);for(var colPosition=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](colSpan,item),position={x:this.columnWidth*colPosition.col,y:colPosition.y},setHeight=colPosition.y+item.size.outerHeight,setMax=colSpan+colPosition.col,i=colPosition.col;i<setMax;i++)this.colYs[i]=setHeight;return position},proto._getTopColPosition=function(colSpan){var colGroup=this._getTopColGroup(colSpan),minimumY=Math.min.apply(Math,colGroup);return{col:colGroup.indexOf(minimumY),y:minimumY}},proto._getTopColGroup=function(colSpan){if(colSpan<2)return this.colYs;for(var colGroup=[],groupCount=this.cols+1-colSpan,i=0;i<groupCount;i++)colGroup[i]=this._getColGroupY(i,colSpan);return colGroup},proto._getColGroupY=function(col,colSpan){if(colSpan<2)return this.colYs[col];var groupColYs=this.colYs.slice(col,col+colSpan);return Math.max.apply(Math,groupColYs)},proto._getHorizontalColPosition=function(colSpan,item){var col=this.horizontalColIndex%this.cols;col=1<colSpan&&col+colSpan>this.cols?0:col;var hasSize=item.size.outerWidth&&item.size.outerHeight;return this.horizontalColIndex=hasSize?col+colSpan:this.horizontalColIndex,{col:col,y:this._getColGroupY(col,colSpan)}},proto._manageStamp=function(stamp){var stampSize=getSize(stamp),offset=this._getElementOffset(stamp),firstX=this._getOption("originLeft")?offset.left:offset.right,lastX=firstX+stampSize.outerWidth,firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1,lastCol=Math.min(this.cols-1,lastCol);for(var stampMaxY=(this._getOption("originTop")?offset.top:offset.bottom)+stampSize.outerHeight,i=firstCol;i<=lastCol;i++)this.colYs[i]=Math.max(stampMaxY,this.colYs[i])},proto._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};return this._getOption("fitWidth")&&(size.width=this._getContainerFitWidth()),size},proto._getContainerFitWidth=function(){for(var unusedCols=0,i=this.cols;--i&&0===this.colYs[i];)unusedCols++;return(this.cols-unusedCols)*this.columnWidth-this.gutter},proto.needsResizeLayout=function(){var previousWidth=this.containerWidth;return this.getContainerWidth(),previousWidth!=this.containerWidth},Masonry});var objectFitImages=function(){"use strict";var OFI="bfred-it:object-fit-images",propRegex=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,testImg="undefined"==typeof Image?{style:{"object-position":1}}:new Image,supportsObjectFit="object-fit"in testImg.style,supportsObjectPosition="object-position"in testImg.style,supportsOFI="background-size"in testImg.style,supportsCurrentSrc="string"==typeof testImg.currentSrc,nativeGetAttribute=testImg.getAttribute,nativeSetAttribute=testImg.setAttribute,autoModeEnabled=!1;function setPlaceholder(img,width,height){var placeholder="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+(width||1)+"' height='"+(height||0)+"'%3E%3C/svg%3E";nativeGetAttribute.call(img,"src")!==placeholder&&nativeSetAttribute.call(img,"src",placeholder)}function onImageReady(img,callback){img.naturalWidth?callback(img):setTimeout(onImageReady,100,img,callback)}function fixOne(el){var style=function(el){for(var parsed,style=getComputedStyle(el).fontFamily,props={};null!==(parsed=propRegex.exec(style));)props[parsed[1]]=parsed[2];return props}(el),ofi=el[OFI];if(style["object-fit"]=style["object-fit"]||"fill",!ofi.img){if("fill"===style["object-fit"])return;if(!ofi.skipTest&&supportsObjectFit&&!style["object-position"])return}if(!ofi.img){ofi.img=new Image(el.width,el.height),ofi.img.srcset=nativeGetAttribute.call(el,"data-ofi-srcset")||el.srcset,ofi.img.src=nativeGetAttribute.call(el,"data-ofi-src")||el.src,nativeSetAttribute.call(el,"data-ofi-src",el.src),el.srcset&&nativeSetAttribute.call(el,"data-ofi-srcset",el.srcset),setPlaceholder(el,el.naturalWidth||el.width,el.naturalHeight||el.height),el.srcset&&(el.srcset="");try{!function(el){var descriptors={get:function(prop){return el[OFI].img[prop||"src"]},set:function(value,prop){return el[OFI].img[prop||"src"]=value,nativeSetAttribute.call(el,"data-ofi-"+prop,value),fixOne(el),value}};Object.defineProperty(el,"src",descriptors),Object.defineProperty(el,"currentSrc",{get:function(){return descriptors.get("currentSrc")}}),Object.defineProperty(el,"srcset",{get:function(){return descriptors.get("srcset")},set:function(ss){return descriptors.set(ss,"srcset")}})}(el)}catch(err){window.console}}!function(el){if(el.srcset&&!supportsCurrentSrc&&window.picturefill){var pf=window.picturefill._;el[pf.ns]&&el[pf.ns].evaled||pf.fillImg(el,{reselect:!0}),el[pf.ns].curSrc||(el[pf.ns].supported=!1,pf.fillImg(el,{reselect:!0})),el.currentSrc=el[pf.ns].curSrc||el.src}}(ofi.img),el.style.backgroundImage='url("'+(ofi.img.currentSrc||ofi.img.src).replace(/"/g,'\\"')+'")',el.style.backgroundPosition=style["object-position"]||"center",el.style.backgroundRepeat="no-repeat",el.style.backgroundOrigin="content-box",/scale-down/.test(style["object-fit"])?onImageReady(ofi.img,function(){ofi.img.naturalWidth>el.width||ofi.img.naturalHeight>el.height?el.style.backgroundSize="contain":el.style.backgroundSize="auto"}):el.style.backgroundSize=style["object-fit"].replace("none","auto").replace("fill","100% 100%"),onImageReady(ofi.img,function(img){setPlaceholder(el,img.naturalWidth,img.naturalHeight)})}function fix(imgs,opts){var startAutoMode=!autoModeEnabled&&!imgs;if(opts=opts||{},imgs=imgs||"img",supportsObjectPosition&&!opts.skipTest||!supportsOFI)return!1;"img"===imgs?imgs=document.getElementsByTagName("img"):"string"==typeof imgs?imgs=document.querySelectorAll(imgs):"length"in imgs||(imgs=[imgs]);for(var i=0;i<imgs.length;i++)imgs[i][OFI]=imgs[i][OFI]||{skipTest:opts.skipTest},fixOne(imgs[i]);startAutoMode&&(document.body.addEventListener("load",function(e){"IMG"===e.target.tagName&&fix(e.target,{skipTest:opts.skipTest})},!0),autoModeEnabled=!0,imgs="img"),opts.watchMQ&&window.addEventListener("resize",fix.bind(null,imgs,{skipTest:opts.skipTest}))}return fix.supportsObjectFit=supportsObjectFit,fix.supportsObjectPosition=supportsObjectPosition,function(){function getOfiImageMaybe(el,name){return el[OFI]&&el[OFI].img&&("src"===name||"srcset"===name)?el[OFI].img:el}supportsObjectPosition||(HTMLImageElement.prototype.getAttribute=function(name){return nativeGetAttribute.call(getOfiImageMaybe(this,name),name)},HTMLImageElement.prototype.setAttribute=function(name,value){return nativeSetAttribute.call(getOfiImageMaybe(this,name),name,String(value))})}(),fix}();function search_filled(){var $search=$(".search");$(".search__control",$search).on("focusout",function(){var $this=$(this);""!=$this.val()?$this.addClass("filled"):$this.removeClass("filled")})}function dropdown_init(){$(".dropdown__toggle").on("click",function(){return $(this).next(".dropdown__menu").hasClass("is-open")?$(this).next(".dropdown__menu").removeClass("animating slideDown is-open"):$(this).next(".dropdown__menu").addClass("animating slideDown is-open"),!1}),$(document).on("click",function(e){var target=e.target;$(target).is(".dropdown__toggle")||$(target).parents().is(".dropdown__toggle")||$(".dropdown__menu").removeClass("animating slideDown is-open")})}function tabs_init(){$("[data-tab]").on("click",function(){var tab_id=$(this).attr("data-tab");return $("ul.tabs li").removeClass("is-current"),$(".tabs__content").removeClass("is-current"),$(this).addClass("is-current"),$("#"+tab_id).addClass("is-current"),!1})}function masonry_init(){if($().masonry){var $grid=$(".grid").masonry({itemSelector:".grid__item",percentPosition:!0,columnWidth:".grid__item"});$grid.imagesLoaded().progress(function(){$grid.masonry()})}}function wizard_validation_init(){if($().steps){var form=$("#wizard");$.validator.addMethod("regxMail",function(value,element,regexpr){return regexpr.test(value)},"Your email address must be in the format of name@domain.com"),$.validator.addMethod("regxNew",function(value,element,regexpr){return regexpr.test(value)},"Please enter a username without @"),form.validate({rules:{email:{regxMail:/^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$/},inputUsername:{regxNew:/^((?!@).)*$/},selectPose:{required:"#checkPose:not(:checked)"}},messages:{email:{required:"This field is required.",email:"Your email address must be in the format of name@domain.com"},inputUsername:{required:"This field is required.",inputUsername:"Please enter a username without @"}},errorPlacement:function(error,element){var $parent=element.closest(".form__group");element.hasClass("select2")?$parent.find(".select2").not("select").after(error):$parent.find(".form__control").after(error)},highlight:function(element){$(element).closest(".form__group").addClass("has-error")},unhighlight:function(element){$(element).closest(".form__group").removeClass("has-error")}}),form.steps({headerTag:"h2",bodyTag:"section",titleTemplate:'<span class="dot"></span>#title#',enableFinishButton:!1,transitionEffect:"fade",labels:{finish:"Finish",next:"Next",previous:"Back"},onInit:function(event,currentIndex){$(this).removeClass("loader"),$(".actions > ul > li:first-child").append('<a href="#" class="btn-upload">Back</a>'),$("#wizard .actions a[href='#previous']").hide()},onStepChanging:function(event,currentIndex,newIndex){var $content=$(this).find(".content");return form.validate().settings.ignore=":disabled,:hidden",newIndex<currentIndex||(form.valid()?($content.addClass("animation"),!0):void 0)},onStepChanged:function(event,currentIndex,priorIndex){$(this).find(".content").removeClass("animation"),0<currentIndex?($(".actions > ul > li:first-child .btn-upload").hide(),$("#wizard .actions a[href='#previous']").show()):($(".actions > ul > li:first-child .btn-upload").show(),$("#wizard .actions a[href='#previous']").hide()),2==currentIndex?$("#wizard .actions a[href='#next']").text("Finish"):$("#wizard .actions a[href='#next']").text("Next"),3==currentIndex&&$("#wizard .actions a[href='#previous']").hide()},onFinishing:function(event,currentIndex){return form.validate().settings.ignore=":disabled",form.valid()},onFinished:function(event,currentIndex){}})}}function upload_init(init){$(".drop").addClass("dropzone").dropzone({url:"/file/post",dictDefaultMessage:'<span class="dropzone__text">Drag and drop your best yoga photo here</span><span class="dropzone__text dropzone__text--sm">or</span><span class="button">Select a file</span>',acceptedFiles:".png, .jpg, .jpeg, .mp4, .mov",maxFiles:1,thumbnailWidth:null,thumbnailHeight:null,maxFilesize:10,clickable:[".drop",".btn-upload"],init:function(){this.on("thumbnail",function(file,dataUrl){$(".dz-image").last().find("img").attr({width:"100%",height:"100%"}),$(this.element).removeClass("has-error")}),this.on("maxfilesexceeded",function(file){this.removeAllFiles(),this.addFile(file)}),this.on("addedfile",function(file,done){if("video/mp4"==file.type||"video/mov"==file.type||"video/quicktime"==file.type?this.options.maxFilesize=50:this.options.maxFilesize=10,"video/mp4"==file.type||"video/mov"==file.type||"video/quicktime"==file.type){$(".dz-image").append('<video id="preview" controls></video>');var $previewEl=$("video#preview");if($previewEl.prev("img").remove(),"no"!==$previewEl[0].canPlayType(file.type)){var fileURL=URL.createObjectURL(file);$previewEl.one("loadeddata",function(){var canvas=document.getElementById("canvas-video"),video=document.getElementById("preview"),imageScreen=document.getElementById("video-screenshot");canvas.width=video.videoWidth,canvas.height=video.videoHeight,canvas.getContext("2d").drawImage(video,0,0,video.videoWidth,video.videoHeight);var dataURL=canvas.toDataURL("image/png");imageScreen.src=dataURL}),$previewEl[0].src=fileURL}}(file.accepted||file.size<1024*this.options.maxFilesize*1024)&&$(this.element).closest(".wizard").find(".actions").show()}),this.on("success",function(file,response){$(".dz-image").css({width:"100%",height:"auto"})}),this.on("error",function(file){(!file.accepted||file.size>1024*this.options.maxFilesize*1024)&&(this.removeFile(file),$(this.element).addClass("has-error"))})},addRemoveLinks:!0,removedfile:function(file){var _ref;return null!=(_ref=file.previewElement)?_ref.parentNode.removeChild(file.previewElement):void 0}})}function select_init(){$(".js-select2-light").select2({theme:"default select2-light",minimumResultsForSearch:-1,dropdownParent:$(".filter")}).on("select2:open",function(e){$(".select2-light").find(".select2-dropdown").addClass("animating slideDown").delay(1e3).queue(function(){$(this).removeClass("animating slideDown").dequeue()})}),$(".js-select2-full").select2({theme:"default select2-full"}).on("select2:open",function(e){$(".select2-full").find(".select2-dropdown").addClass("animating slideDown").delay(1e3).queue(function(){$(this).removeClass("animating slideDown").dequeue()})}).on("select2:close",function(e){$(this).valid()}),$("#checkPose").on("change",function(){var $this=$(this),$select=$this.closest(".form__group").find(".js-select2-full");$this.prop("checked"),$select.valid()})}function hover_image(){$(".tabs__image").each(function(){var $thisImageHolder=$(this),$textHolder=$thisImageHolder.find(".tabs__text"),defaultText=$textHolder.text(),$defaultImage=$("img",$thisImageHolder),$linkHover=$(".hover-link"),$wrap=$linkHover.closest(".tabs__list");$linkHover.on("mouseenter",function(){var linkText=$(this).text(),filename=$(this).data("img");$('<img class="hover-image" src="'+filename+'" alt="" />').appendTo($thisImageHolder).hide().fadeIn(350),$textHolder.text(linkText),$defaultImage.fadeOut(350)}),$linkHover.on("mouseleave",function(){$(".hover-image").fadeOut(350,function(){$(this).remove()})}),$wrap.on("mouseleave",function(e){$defaultImage.fadeIn(350),$textHolder.text(defaultText)})})}function input_date_placeholder(){$('[data-toggle="datepicker"]').datepicker({autoHide:!0})}!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=function(root,jQuery){return void 0===jQuery&&(jQuery="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory(jQuery),jQuery}:factory(jQuery)}(function(jQuery){var S2=function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var S2=jQuery.fn.select2.amd;var requirejs,require,define;return S2&&S2.requirejs||(S2?require=S2:S2={},function(undef){var main,req,makeMap,handlers,defined={},waiting={},config={},defining={},hasOwn=Object.prototype.hasOwnProperty,aps=[].slice,jsSuffixRegExp=/\.js$/;function hasProp(obj,prop){return hasOwn.call(obj,prop)}function normalize(name,baseName){var nameParts,nameSegment,mapValue,foundMap,lastIndex,foundI,foundStarMap,starI,i,j,part,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"]||{};if(name&&"."===name.charAt(0))if(baseName){for(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),name=baseParts.slice(0,baseParts.length-1).concat(name),i=0;i<name.length;i+=1)if("."===(part=name[i]))name.splice(i,1),i-=1;else if(".."===part){if(1===i&&(".."===name[2]||".."===name[0]))break;0<i&&(name.splice(i-1,2),i-=2)}name=name.join("/")}else 0===name.indexOf("./")&&(name=name.substring(2));if((baseParts||starMap)&&map){for(i=(nameParts=name.split("/")).length;0<i;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;0<j;j-=1)if((mapValue=map[baseParts.slice(0,j).join("/")])&&(mapValue=mapValue[nameSegment])){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&starMap[nameSegment]&&(foundStarMap=starMap[nameSegment],starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function makeRequire(relName,forceSync){return function(){var args=aps.call(arguments,0);return"string"!=typeof args[0]&&1===args.length&&args.push(null),req.apply(undef,args.concat([relName,forceSync]))}}function makeLoad(depName){return function(value){defined[depName]=value}}function callDep(name){if(hasProp(waiting,name)){var args=waiting[name];delete waiting[name],defining[name]=!0,main.apply(undef,args)}if(!hasProp(defined,name)&&!hasProp(defining,name))throw new Error("No "+name);return defined[name]}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}makeMap=function(name,relName){var plugin,parts=splitPrefix(name),prefix=parts[0];return name=parts[1],prefix&&(plugin=callDep(prefix=normalize(prefix,relName))),prefix?name=plugin&&plugin.normalize?plugin.normalize(name,function(relName){return function(name){return normalize(name,relName)}}(relName)):normalize(name,relName):(prefix=(parts=splitPrefix(name=normalize(name,relName)))[0],name=parts[1],prefix&&(plugin=callDep(prefix))),{f:prefix?prefix+"!"+name:name,n:name,pr:prefix,p:plugin}},handlers={require:function(name){return makeRequire(name)},exports:function(name){var e=defined[name];return void 0!==e?e:defined[name]={}},module:function(name){return{id:name,uri:"",exports:defined[name],config:function(name){return function(){return config&&config.config&&config.config[name]||{}}}(name)}}},main=function(name,deps,callback,relName){var cjsModule,depName,ret,map,i,usingExports,args=[],callbackType=typeof callback;if(relName=relName||name,"undefined"===callbackType||"function"===callbackType){for(deps=!deps.length&&callback.length?["require","exports","module"]:deps,i=0;i<deps.length;i+=1)if("require"===(depName=(map=makeMap(deps[i],relName)).f))args[i]=handlers.require(name);else if("exports"===depName)args[i]=handlers.exports(name),usingExports=!0;else if("module"===depName)cjsModule=args[i]=handlers.module(name);else if(hasProp(defined,depName)||hasProp(waiting,depName)||hasProp(defining,depName))args[i]=callDep(depName);else{if(!map.p)throw new Error(name+" missing "+depName);map.p.load(map.n,makeRequire(relName,!0),makeLoad(depName),{}),args[i]=defined[depName]}ret=callback?callback.apply(defined[name],args):void 0,name&&(cjsModule&&cjsModule.exports!==undef&&cjsModule.exports!==defined[name]?defined[name]=cjsModule.exports:ret===undef&&usingExports||(defined[name]=ret))}else name&&(defined[name]=callback)},requirejs=require=req=function(deps,callback,relName,forceSync,alt){if("string"==typeof deps)return handlers[deps]?handlers[deps](callback):callDep(makeMap(deps,callback).f);if(!deps.splice){if((config=deps).deps&&req(config.deps,config.callback),!callback)return;callback.splice?(deps=callback,callback=relName,relName=null):deps=undef}return callback=callback||function(){},"function"==typeof relName&&(relName=forceSync,forceSync=alt),forceSync?main(undef,deps,callback,relName):setTimeout(function(){main(undef,deps,callback,relName)},4),req},req.config=function(cfg){return req(cfg)},requirejs._defined=defined,(define=function(name,deps,callback){if("string"!=typeof name)throw new Error("See almond README: incorrect module build, no module name");deps.splice||(callback=deps,deps=[]),hasProp(defined,name)||hasProp(waiting,name)||(waiting[name]=[name,deps,callback])}).amd={jQuery:!0}}(),S2.requirejs=requirejs,S2.require=require,S2.define=define),S2.define("almond",function(){}),S2.define("jquery",[],function(){var _$=jQuery||$;return null==_$&&console&&console.error,_$}),S2.define("select2/utils",["jquery"],function($){var Utils={};function getMethods(theClass){var proto=theClass.prototype,methods=[];for(var methodName in proto){"function"==typeof proto[methodName]&&("constructor"!==methodName&&methods.push(methodName))}return methods}Utils.Extend=function(ChildClass,SuperClass){var __hasProp={}.hasOwnProperty;function BaseConstructor(){this.constructor=ChildClass}for(var key in SuperClass)__hasProp.call(SuperClass,key)&&(ChildClass[key]=SuperClass[key]);return BaseConstructor.prototype=SuperClass.prototype,ChildClass.prototype=new BaseConstructor,ChildClass.__super__=SuperClass.prototype,ChildClass},Utils.Decorate=function(SuperClass,DecoratorClass){var decoratedMethods=getMethods(DecoratorClass),superMethods=getMethods(SuperClass);function DecoratedClass(){var unshift=Array.prototype.unshift,argCount=DecoratorClass.prototype.constructor.length,calledConstructor=SuperClass.prototype.constructor;0<argCount&&(unshift.call(arguments,SuperClass.prototype.constructor),calledConstructor=DecoratorClass.prototype.constructor),calledConstructor.apply(this,arguments)}DecoratorClass.displayName=SuperClass.displayName,DecoratedClass.prototype=new function(){this.constructor=DecoratedClass};for(var m=0;m<superMethods.length;m++){var superMethod=superMethods[m];DecoratedClass.prototype[superMethod]=SuperClass.prototype[superMethod]}for(var calledMethod=function(methodName){var originalMethod=function(){};methodName in DecoratedClass.prototype&&(originalMethod=DecoratedClass.prototype[methodName]);var decoratedMethod=DecoratorClass.prototype[methodName];return function(){return Array.prototype.unshift.call(arguments,originalMethod),decoratedMethod.apply(this,arguments)}},d=0;d<decoratedMethods.length;d++){var decoratedMethod=decoratedMethods[d];DecoratedClass.prototype[decoratedMethod]=calledMethod(decoratedMethod)}return DecoratedClass};var Observable=function(){this.listeners={}};return Observable.prototype.on=function(event,callback){this.listeners=this.listeners||{},event in this.listeners?this.listeners[event].push(callback):this.listeners[event]=[callback]},Observable.prototype.trigger=function(event){var slice=Array.prototype.slice,params=slice.call(arguments,1);this.listeners=this.listeners||{},null==params&&(params=[]),0===params.length&&params.push({}),(params[0]._type=event)in this.listeners&&this.invoke(this.listeners[event],slice.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},Observable.prototype.invoke=function(listeners,params){for(var i=0,len=listeners.length;i<len;i++)listeners[i].apply(this,params)},Utils.Observable=Observable,Utils.generateChars=function(length){for(var chars="",i=0;i<length;i++){chars+=Math.floor(36*Math.random()).toString(36)}return chars},Utils.bind=function(func,context){return function(){func.apply(context,arguments)}},Utils._convertData=function(data){for(var originalKey in data){var keys=originalKey.split("-"),dataLevel=data;if(1!==keys.length){for(var k=0;k<keys.length;k++){var key=keys[k];(key=key.substring(0,1).toLowerCase()+key.substring(1))in dataLevel||(dataLevel[key]={}),k==keys.length-1&&(dataLevel[key]=data[originalKey]),dataLevel=dataLevel[key]}delete data[originalKey]}}return data},Utils.hasScroll=function(index,el){var $el=$(el),overflowX=el.style.overflowX,overflowY=el.style.overflowY;return(overflowX!==overflowY||"hidden"!==overflowY&&"visible"!==overflowY)&&("scroll"===overflowX||"scroll"===overflowY||($el.innerHeight()<el.scrollHeight||$el.innerWidth()<el.scrollWidth))},Utils.escapeMarkup=function(markup){var replaceMap={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof markup?markup:String(markup).replace(/[&<>"'\/\\]/g,function(match){return replaceMap[match]})},Utils.appendMany=function($element,$nodes){if("1.7"===$.fn.jquery.substr(0,3)){var $jqNodes=$();$.map($nodes,function(node){$jqNodes=$jqNodes.add(node)}),$nodes=$jqNodes}$element.append($nodes)},Utils}),S2.define("select2/results",["jquery","./utils"],function($,Utils){function Results($element,options,dataAdapter){this.$element=$element,this.data=dataAdapter,this.options=options,Results.__super__.constructor.call(this)}return Utils.Extend(Results,Utils.Observable),Results.prototype.render=function(){var $results=$('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&$results.attr("aria-multiselectable","true"),this.$results=$results},Results.prototype.clear=function(){this.$results.empty()},Results.prototype.displayMessage=function(params){var escapeMarkup=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var $message=$('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),message=this.options.get("translations").get(params.message);$message.append(escapeMarkup(message(params.args))),$message[0].className+=" select2-results__message",this.$results.append($message)},Results.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},Results.prototype.append=function(data){this.hideLoading();var $options=[];if(null!=data.results&&0!==data.results.length){data.results=this.sort(data.results);for(var d=0;d<data.results.length;d++){var item=data.results[d],$option=this.option(item);$options.push($option)}this.$results.append($options)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},Results.prototype.position=function($results,$dropdown){$dropdown.find(".select2-results").append($results)},Results.prototype.sort=function(data){return this.options.get("sorter")(data)},Results.prototype.highlightFirstItem=function(){var $options=this.$results.find(".select2-results__option[aria-selected]"),$selected=$options.filter("[aria-selected=true]");0<$selected.length?$selected.first().trigger("mouseenter"):$options.first().trigger("mouseenter"),this.ensureHighlightVisible()},Results.prototype.setClasses=function(){var self=this;this.data.current(function(selected){var selectedIds=$.map(selected,function(s){return s.id.toString()});self.$results.find(".select2-results__option[aria-selected]").each(function(){var $option=$(this),item=$.data(this,"data"),id=""+item.id;null!=item.element&&item.element.selected||null==item.element&&-1<$.inArray(id,selectedIds)?$option.attr("aria-selected","true"):$option.attr("aria-selected","false")})})},Results.prototype.showLoading=function(params){this.hideLoading();var loading={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(params)},$loading=this.option(loading);$loading.className+=" loading-results",this.$results.prepend($loading)},Results.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},Results.prototype.option=function(data){var option=document.createElement("li");option.className="select2-results__option";var attrs={role:"treeitem","aria-selected":"false"};for(var attr in data.disabled&&(delete attrs["aria-selected"],attrs["aria-disabled"]="true"),null==data.id&&delete attrs["aria-selected"],null!=data._resultId&&(option.id=data._resultId),data.title&&(option.title=data.title),data.children&&(attrs.role="group",attrs["aria-label"]=data.text,delete attrs["aria-selected"]),attrs){var val=attrs[attr];option.setAttribute(attr,val)}if(data.children){var $option=$(option),label=document.createElement("strong");label.className="select2-results__group";$(label);this.template(data,label);for(var $children=[],c=0;c<data.children.length;c++){var child=data.children[c],$child=this.option(child);$children.push($child)}var $childrenContainer=$("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});$childrenContainer.append($children),$option.append(label),$option.append($childrenContainer)}else this.template(data,option);return $.data(option,"data",data),option},Results.prototype.bind=function(container,$container){var self=this,id=container.id+"-results";this.$results.attr("id",id),container.on("results:all",function(params){self.clear(),self.append(params.data),container.isOpen()&&(self.setClasses(),self.highlightFirstItem())}),container.on("results:append",function(params){self.append(params.data),container.isOpen()&&self.setClasses()}),container.on("query",function(params){self.hideMessages(),self.showLoading(params)}),container.on("select",function(){container.isOpen()&&(self.setClasses(),self.highlightFirstItem())}),container.on("unselect",function(){container.isOpen()&&(self.setClasses(),self.highlightFirstItem())}),container.on("open",function(){self.$results.attr("aria-expanded","true"),self.$results.attr("aria-hidden","false"),self.setClasses(),self.ensureHighlightVisible()}),container.on("close",function(){self.$results.attr("aria-expanded","false"),self.$results.attr("aria-hidden","true"),self.$results.removeAttr("aria-activedescendant")}),container.on("results:toggle",function(){var $highlighted=self.getHighlightedResults();0!==$highlighted.length&&$highlighted.trigger("mouseup")}),container.on("results:select",function(){var $highlighted=self.getHighlightedResults();if(0!==$highlighted.length){var data=$highlighted.data("data");"true"==$highlighted.attr("aria-selected")?self.trigger("close",{}):self.trigger("select",{data:data})}}),container.on("results:previous",function(){var $highlighted=self.getHighlightedResults(),$options=self.$results.find("[aria-selected]"),currentIndex=$options.index($highlighted);if(0!==currentIndex){var nextIndex=currentIndex-1;0===$highlighted.length&&(nextIndex=0);var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top,nextTop=$next.offset().top,nextOffset=self.$results.scrollTop()+(nextTop-currentOffset);0===nextIndex?self.$results.scrollTop(0):nextTop-currentOffset<0&&self.$results.scrollTop(nextOffset)}}),container.on("results:next",function(){var $highlighted=self.getHighlightedResults(),$options=self.$results.find("[aria-selected]"),nextIndex=$options.index($highlighted)+1;if(!(nextIndex>=$options.length)){var $next=$options.eq(nextIndex);$next.trigger("mouseenter");var currentOffset=self.$results.offset().top+self.$results.outerHeight(!1),nextBottom=$next.offset().top+$next.outerHeight(!1),nextOffset=self.$results.scrollTop()+nextBottom-currentOffset;0===nextIndex?self.$results.scrollTop(0):currentOffset<nextBottom&&self.$results.scrollTop(nextOffset)}}),container.on("results:focus",function(params){params.element.addClass("select2-results__option--highlighted")}),container.on("results:message",function(params){self.displayMessage(params)}),$.fn.mousewheel&&this.$results.on("mousewheel",function(e){var top=self.$results.scrollTop(),bottom=self.$results.get(0).scrollHeight-top+e.deltaY,isAtTop=0<e.deltaY&&top-e.deltaY<=0,isAtBottom=e.deltaY<0&&bottom<=self.$results.height();isAtTop?(self.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):isAtBottom&&(self.$results.scrollTop(self.$results.get(0).scrollHeight-self.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(evt){var $this=$(this),data=$this.data("data");"true"!==$this.attr("aria-selected")?self.trigger("select",{originalEvent:evt,data:data}):self.options.get("multiple")?self.trigger("unselect",{originalEvent:evt,data:data}):self.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(evt){var data=$(this).data("data");self.getHighlightedResults().removeClass("select2-results__option--highlighted"),self.trigger("results:focus",{data:data,element:$(this)})})},Results.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},Results.prototype.destroy=function(){this.$results.remove()},Results.prototype.ensureHighlightVisible=function(){var $highlighted=this.getHighlightedResults();if(0!==$highlighted.length){var currentIndex=this.$results.find("[aria-selected]").index($highlighted),currentOffset=this.$results.offset().top,nextTop=$highlighted.offset().top,nextOffset=this.$results.scrollTop()+(nextTop-currentOffset),offsetDelta=nextTop-currentOffset;nextOffset-=2*$highlighted.outerHeight(!1),currentIndex<=2?this.$results.scrollTop(0):(offsetDelta>this.$results.outerHeight()||offsetDelta<0)&&this.$results.scrollTop(nextOffset)}},Results.prototype.template=function(result,container){var template=this.options.get("templateResult"),escapeMarkup=this.options.get("escapeMarkup"),content=template(result,container);null==content?container.style.display="none":"string"==typeof content?container.innerHTML=escapeMarkup(content):$(container).append(content)},Results}),S2.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),S2.define("select2/selection/base",["jquery","../utils","../keys"],function($,Utils,KEYS){function BaseSelection($element,options){this.$element=$element,this.options=options,BaseSelection.__super__.constructor.call(this)}return Utils.Extend(BaseSelection,Utils.Observable),BaseSelection.prototype.render=function(){var $selection=$('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),$selection.attr("title",this.$element.attr("title")),$selection.attr("tabindex",this._tabindex),this.$selection=$selection},BaseSelection.prototype.bind=function(container,$container){var self=this,resultsId=(container.id,container.id+"-results");this.container=container,this.$selection.on("focus",function(evt){self.trigger("focus",evt)}),this.$selection.on("blur",function(evt){self._handleBlur(evt)}),this.$selection.on("keydown",function(evt){self.trigger("keypress",evt),evt.which===KEYS.SPACE&&evt.preventDefault()}),container.on("results:focus",function(params){self.$selection.attr("aria-activedescendant",params.data._resultId)}),container.on("selection:update",function(params){self.update(params.data)}),container.on("open",function(){self.$selection.attr("aria-expanded","true"),self.$selection.attr("aria-owns",resultsId),self._attachCloseHandler(container)}),container.on("close",function(){self.$selection.attr("aria-expanded","false"),self.$selection.removeAttr("aria-activedescendant"),self.$selection.removeAttr("aria-owns"),self.$selection.focus(),self._detachCloseHandler(container)}),container.on("enable",function(){self.$selection.attr("tabindex",self._tabindex)}),container.on("disable",function(){self.$selection.attr("tabindex","-1")})},BaseSelection.prototype._handleBlur=function(evt){var self=this;window.setTimeout(function(){document.activeElement==self.$selection[0]||$.contains(self.$selection[0],document.activeElement)||self.trigger("blur",evt)},1)},BaseSelection.prototype._attachCloseHandler=function(container){$(document.body).on("mousedown.select2."+container.id,function(e){var $select=$(e.target).closest(".select2");$(".select2.select2-container--open").each(function(){var $this=$(this);this!=$select[0]&&$this.data("element").select2("close")})})},BaseSelection.prototype._detachCloseHandler=function(container){$(document.body).off("mousedown.select2."+container.id)},BaseSelection.prototype.position=function($selection,$container){$container.find(".selection").append($selection)},BaseSelection.prototype.destroy=function(){this._detachCloseHandler(this.container)},BaseSelection.prototype.update=function(data){throw new Error("The `update` method must be defined in child classes.")},BaseSelection}),S2.define("select2/selection/single",["jquery","./base","../utils","../keys"],function($,BaseSelection,Utils,KEYS){function SingleSelection(){SingleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(SingleSelection,BaseSelection),SingleSelection.prototype.render=function(){var $selection=SingleSelection.__super__.render.call(this);return $selection.addClass("select2-selection--single"),$selection.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),$selection},SingleSelection.prototype.bind=function(container,$container){var self=this;SingleSelection.__super__.bind.apply(this,arguments);var id=container.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",id),this.$selection.attr("aria-labelledby",id),this.$selection.on("mousedown",function(evt){1===evt.which&&self.trigger("toggle",{originalEvent:evt})}),this.$selection.on("focus",function(evt){}),this.$selection.on("blur",function(evt){}),container.on("focus",function(evt){container.isOpen()||self.$selection.focus()}),container.on("selection:update",function(params){self.update(params.data)})},SingleSelection.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},SingleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");return this.options.get("escapeMarkup")(template(data,container))},SingleSelection.prototype.selectionContainer=function(){return $("<span></span>")},SingleSelection.prototype.update=function(data){if(0!==data.length){var selection=data[0],$rendered=this.$selection.find(".select2-selection__rendered"),formatted=this.display(selection,$rendered);$rendered.empty().append(formatted),$rendered.prop("title",selection.title||selection.text)}else this.clear()},SingleSelection}),S2.define("select2/selection/multiple",["jquery","./base","../utils"],function($,BaseSelection,Utils){function MultipleSelection($element,options){MultipleSelection.__super__.constructor.apply(this,arguments)}return Utils.Extend(MultipleSelection,BaseSelection),MultipleSelection.prototype.render=function(){var $selection=MultipleSelection.__super__.render.call(this);return $selection.addClass("select2-selection--multiple"),$selection.html('<ul class="select2-selection__rendered"></ul>'),$selection},MultipleSelection.prototype.bind=function(container,$container){var self=this;MultipleSelection.__super__.bind.apply(this,arguments),this.$selection.on("click",function(evt){self.trigger("toggle",{originalEvent:evt})}),this.$selection.on("click",".select2-selection__choice__remove",function(evt){if(!self.options.get("disabled")){var data=$(this).parent().data("data");self.trigger("unselect",{originalEvent:evt,data:data})}})},MultipleSelection.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},MultipleSelection.prototype.display=function(data,container){var template=this.options.get("templateSelection");return this.options.get("escapeMarkup")(template(data,container))},MultipleSelection.prototype.selectionContainer=function(){return $('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},MultipleSelection.prototype.update=function(data){if(this.clear(),0!==data.length){for(var $selections=[],d=0;d<data.length;d++){var selection=data[d],$selection=this.selectionContainer(),formatted=this.display(selection,$selection);$selection.append(formatted),$selection.prop("title",selection.title||selection.text),$selection.data("data",selection),$selections.push($selection)}var $rendered=this.$selection.find(".select2-selection__rendered");Utils.appendMany($rendered,$selections)}},MultipleSelection}),S2.define("select2/selection/placeholder",["../utils"],function(Utils){function Placeholder(decorated,$element,options){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options)}return Placeholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},Placeholder.prototype.createPlaceholder=function(decorated,placeholder){var $placeholder=this.selectionContainer();return $placeholder.html(this.display(placeholder)),$placeholder.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),$placeholder},Placeholder.prototype.update=function(decorated,data){var singlePlaceholder=1==data.length&&data[0].id!=this.placeholder.id;if(1<data.length||singlePlaceholder)return decorated.call(this,data);this.clear();var $placeholder=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append($placeholder)},Placeholder}),S2.define("select2/selection/allowClear",["jquery","../keys"],function($,KEYS){function AllowClear(){}return AllowClear.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error,this.$selection.on("mousedown",".select2-selection__clear",function(evt){self._handleClear(evt)}),container.on("keypress",function(evt){self._handleKeyboardClear(evt,container)})},AllowClear.prototype._handleClear=function(_,evt){if(!this.options.get("disabled")){var $clear=this.$selection.find(".select2-selection__clear");if(0!==$clear.length){evt.stopPropagation();for(var data=$clear.data("data"),d=0;d<data.length;d++){var unselectData={data:data[d]};if(this.trigger("unselect",unselectData),unselectData.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},AllowClear.prototype._handleKeyboardClear=function(_,evt,container){container.isOpen()||evt.which!=KEYS.DELETE&&evt.which!=KEYS.BACKSPACE||this._handleClear(evt)},AllowClear.prototype.update=function(decorated,data){if(decorated.call(this,data),!(0<this.$selection.find(".select2-selection__placeholder").length||0===data.length)){var $remove=$('<span class="select2-selection__clear">&times;</span>');$remove.data("data",data),this.$selection.find(".select2-selection__rendered").prepend($remove)}},AllowClear}),S2.define("select2/selection/search",["jquery","../utils","../keys"],function($,Utils,KEYS){function Search(decorated,$element,options){decorated.call(this,$element,options)}return Search.prototype.render=function(decorated){var $search=$('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=$search,this.$search=$search.find("input");var $rendered=decorated.call(this);return this._transferTabIndex(),$rendered},Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("open",function(){self.$search.trigger("focus")}),container.on("close",function(){self.$search.val(""),self.$search.removeAttr("aria-activedescendant"),self.$search.trigger("focus")}),container.on("enable",function(){self.$search.prop("disabled",!1),self._transferTabIndex()}),container.on("disable",function(){self.$search.prop("disabled",!0)}),container.on("focus",function(evt){self.$search.trigger("focus")}),container.on("results:focus",function(params){self.$search.attr("aria-activedescendant",params.id)}),this.$selection.on("focusin",".select2-search--inline",function(evt){self.trigger("focus",evt)}),this.$selection.on("focusout",".select2-search--inline",function(evt){self._handleBlur(evt)}),this.$selection.on("keydown",".select2-search--inline",function(evt){if(evt.stopPropagation(),self.trigger("keypress",evt),self._keyUpPrevented=evt.isDefaultPrevented(),evt.which===KEYS.BACKSPACE&&""===self.$search.val()){var $previousChoice=self.$searchContainer.prev(".select2-selection__choice");if(0<$previousChoice.length){var item=$previousChoice.data("data");self.searchRemoveChoice(item),evt.preventDefault()}}});var msie=document.documentMode,disableInputEvents=msie&&msie<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(evt){disableInputEvents?self.$selection.off("input.search input.searchcheck"):self.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(evt){if(disableInputEvents&&"input"===evt.type)self.$selection.off("input.search input.searchcheck");else{var key=evt.which;key!=KEYS.SHIFT&&key!=KEYS.CTRL&&key!=KEYS.ALT&&key!=KEYS.TAB&&self.handleSearch(evt)}})},Search.prototype._transferTabIndex=function(decorated){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},Search.prototype.createPlaceholder=function(decorated,placeholder){this.$search.attr("placeholder",placeholder.text)},Search.prototype.update=function(decorated,data){var searchHadFocus=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),decorated.call(this,data),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),searchHadFocus&&this.$search.focus()},Search.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.searchRemoveChoice=function(decorated,item){this.trigger("unselect",{data:item}),this.$search.val(item.text),this.handleSearch()},Search.prototype.resizeSearch=function(){this.$search.css("width","25px");var width="";""!==this.$search.attr("placeholder")?width=this.$selection.find(".select2-selection__rendered").innerWidth():width=.75*(this.$search.val().length+1)+"em";this.$search.css("width",width)},Search}),S2.define("select2/selection/eventRelay",["jquery"],function($){function EventRelay(){}return EventRelay.prototype.bind=function(decorated,container,$container){var self=this,relayEvents=["open","opening","close","closing","select","selecting","unselect","unselecting"],preventableEvents=["opening","closing","selecting","unselecting"];decorated.call(this,container,$container),container.on("*",function(name,params){if(-1!==$.inArray(name,relayEvents)){params=params||{};var evt=$.Event("select2:"+name,{params:params});self.$element.trigger(evt),-1!==$.inArray(name,preventableEvents)&&(params.prevented=evt.isDefaultPrevented())}})},EventRelay}),S2.define("select2/translation",["jquery","require"],function($,require){function Translation(dict){this.dict=dict||{}}return Translation.prototype.all=function(){return this.dict},Translation.prototype.get=function(key){return this.dict[key]},Translation.prototype.extend=function(translation){this.dict=$.extend({},translation.all(),this.dict)},Translation._cache={},Translation.loadPath=function(path){if(!(path in Translation._cache)){var translations=require(path);Translation._cache[path]=translations}return new Translation(Translation._cache[path])},Translation}),S2.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}}),S2.define("select2/data/base",["../utils"],function(Utils){function BaseAdapter($element,options){BaseAdapter.__super__.constructor.call(this)}return Utils.Extend(BaseAdapter,Utils.Observable),BaseAdapter.prototype.current=function(callback){throw new Error("The `current` method must be defined in child classes.")},BaseAdapter.prototype.query=function(params,callback){throw new Error("The `query` method must be defined in child classes.")},BaseAdapter.prototype.bind=function(container,$container){},BaseAdapter.prototype.destroy=function(){},BaseAdapter.prototype.generateResultId=function(container,data){var id=container.id+"-result-";return id+=Utils.generateChars(4),null!=data.id?id+="-"+data.id.toString():id+="-"+Utils.generateChars(4),id},BaseAdapter}),S2.define("select2/data/select",["./base","../utils","jquery"],function(BaseAdapter,Utils,$){function SelectAdapter($element,options){this.$element=$element,this.options=options,SelectAdapter.__super__.constructor.call(this)}return Utils.Extend(SelectAdapter,BaseAdapter),SelectAdapter.prototype.current=function(callback){var data=[],self=this;this.$element.find(":selected").each(function(){var $option=$(this),option=self.item($option);data.push(option)}),callback(data)},SelectAdapter.prototype.select=function(data){var self=this;if(data.selected=!0,$(data.element).is("option"))return data.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(currentData){var val=[];(data=[data]).push.apply(data,currentData);for(var d=0;d<data.length;d++){var id=data[d].id;-1===$.inArray(id,val)&&val.push(id)}self.$element.val(val),self.$element.trigger("change")});else{var val=data.id;this.$element.val(val),this.$element.trigger("change")}},SelectAdapter.prototype.unselect=function(data){var self=this;if(this.$element.prop("multiple")){if(data.selected=!1,$(data.element).is("option"))return data.element.selected=!1,void this.$element.trigger("change");this.current(function(currentData){for(var val=[],d=0;d<currentData.length;d++){var id=currentData[d].id;id!==data.id&&-1===$.inArray(id,val)&&val.push(id)}self.$element.val(val),self.$element.trigger("change")})}},SelectAdapter.prototype.bind=function(container,$container){var self=this;(this.container=container).on("select",function(params){self.select(params.data)}),container.on("unselect",function(params){self.unselect(params.data)})},SelectAdapter.prototype.destroy=function(){this.$element.find("*").each(function(){$.removeData(this,"data")})},SelectAdapter.prototype.query=function(params,callback){var data=[],self=this;this.$element.children().each(function(){var $option=$(this);if($option.is("option")||$option.is("optgroup")){var option=self.item($option),matches=self.matches(params,option);null!==matches&&data.push(matches)}}),callback({results:data})},SelectAdapter.prototype.addOptions=function($options){Utils.appendMany(this.$element,$options)},SelectAdapter.prototype.option=function(data){var option;data.children?(option=document.createElement("optgroup")).label=data.text:void 0!==(option=document.createElement("option")).textContent?option.textContent=data.text:option.innerText=data.text,void 0!==data.id&&(option.value=data.id),data.disabled&&(option.disabled=!0),data.selected&&(option.selected=!0),data.title&&(option.title=data.title);var $option=$(option),normalizedData=this._normalizeItem(data);return normalizedData.element=option,$.data(option,"data",normalizedData),$option},SelectAdapter.prototype.item=function($option){var data={};if(null!=(data=$.data($option[0],"data")))return data;if($option.is("option"))data={id:$option.val(),text:$option.text(),disabled:$option.prop("disabled"),selected:$option.prop("selected"),title:$option.prop("title")};else if($option.is("optgroup")){data={text:$option.prop("label"),children:[],title:$option.prop("title")};for(var $children=$option.children("option"),children=[],c=0;c<$children.length;c++){var $child=$($children[c]),child=this.item($child);children.push(child)}data.children=children}return(data=this._normalizeItem(data)).element=$option[0],$.data($option[0],"data",data),data},SelectAdapter.prototype._normalizeItem=function(item){$.isPlainObject(item)||(item={id:item,text:item});return null!=(item=$.extend({},{text:""},item)).id&&(item.id=item.id.toString()),null!=item.text&&(item.text=item.text.toString()),null==item._resultId&&item.id&&null!=this.container&&(item._resultId=this.generateResultId(this.container,item)),$.extend({},{selected:!1,disabled:!1},item)},SelectAdapter.prototype.matches=function(params,data){return this.options.get("matcher")(params,data)},SelectAdapter}),S2.define("select2/data/array",["./select","../utils","jquery"],function(SelectAdapter,Utils,$){function ArrayAdapter($element,options){var data=options.get("data")||[];ArrayAdapter.__super__.constructor.call(this,$element,options),this.addOptions(this.convertToOptions(data))}return Utils.Extend(ArrayAdapter,SelectAdapter),ArrayAdapter.prototype.select=function(data){var $option=this.$element.find("option").filter(function(i,elm){return elm.value==data.id.toString()});0===$option.length&&($option=this.option(data),this.addOptions($option)),ArrayAdapter.__super__.select.call(this,data)},ArrayAdapter.prototype.convertToOptions=function(data){var self=this,$existing=this.$element.find("option"),existingIds=$existing.map(function(){return self.item($(this)).id}).get(),$options=[];function onlyItem(item){return function(){return $(this).val()==item.id}}for(var d=0;d<data.length;d++){var item=this._normalizeItem(data[d]);if(0<=$.inArray(item.id,existingIds)){var $existingOption=$existing.filter(onlyItem(item)),existingData=this.item($existingOption),newData=$.extend(!0,{},item,existingData),$newOption=this.option(newData);$existingOption.replaceWith($newOption)}else{var $option=this.option(item);if(item.children){var $children=this.convertToOptions(item.children);Utils.appendMany($option,$children)}$options.push($option)}}return $options},ArrayAdapter}),S2.define("select2/data/ajax",["./array","../utils","jquery"],function(ArrayAdapter,Utils,$){function AjaxAdapter($element,options){this.ajaxOptions=this._applyDefaults(options.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),AjaxAdapter.__super__.constructor.call(this,$element,options)}return Utils.Extend(AjaxAdapter,ArrayAdapter),AjaxAdapter.prototype._applyDefaults=function(options){var defaults={data:function(params){return $.extend({},params,{q:params.term})},transport:function(params,success,failure){var $request=$.ajax(params);return $request.then(success),$request.fail(failure),$request}};return $.extend({},defaults,options,!0)},AjaxAdapter.prototype.processResults=function(results){return results},AjaxAdapter.prototype.query=function(params,callback){var self=this;null!=this._request&&($.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var options=$.extend({type:"GET"},this.ajaxOptions);function request(){var $request=options.transport(options,function(data){var results=self.processResults(data,params);self.options.get("debug")&&window.console&&console.error&&(!results||!results.results||$.isArray(results.results)),callback(results)},function(){$request.status&&"0"===$request.status||self.trigger("results:message",{message:"errorLoading"})});self._request=$request}"function"==typeof options.url&&(options.url=options.url.call(this.$element,params)),"function"==typeof options.data&&(options.data=options.data.call(this.$element,params)),this.ajaxOptions.delay&&null!=params.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(request,this.ajaxOptions.delay)):request()},AjaxAdapter}),S2.define("select2/data/tags",["jquery"],function($){function Tags(decorated,$element,options){var tags=options.get("tags"),createTag=options.get("createTag");void 0!==createTag&&(this.createTag=createTag);var insertTag=options.get("insertTag");if(void 0!==insertTag&&(this.insertTag=insertTag),decorated.call(this,$element,options),$.isArray(tags))for(var t=0;t<tags.length;t++){var tag=tags[t],item=this._normalizeItem(tag),$option=this.option(item);this.$element.append($option)}}return Tags.prototype.query=function(decorated,params,callback){var self=this;this._removeOldTags(),null!=params.term&&null==params.page?decorated.call(this,params,function wrapper(obj,child){for(var data=obj.results,i=0;i<data.length;i++){var option=data[i],checkChildren=null!=option.children&&!wrapper({results:option.children},!0);if((option.text||"").toUpperCase()===(params.term||"").toUpperCase()||checkChildren)return!child&&(obj.data=data,void callback(obj))}if(child)return!0;var tag=self.createTag(params);if(null!=tag){var $option=self.option(tag);$option.attr("data-select2-tag",!0),self.addOptions([$option]),self.insertTag(data,tag)}obj.results=data,callback(obj)}):decorated.call(this,params,callback)},Tags.prototype.createTag=function(decorated,params){var term=$.trim(params.term);return""===term?null:{id:term,text:term}},Tags.prototype.insertTag=function(_,data,tag){data.unshift(tag)},Tags.prototype._removeOldTags=function(_){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||$(this).remove()})},Tags}),S2.define("select2/data/tokenizer",["jquery"],function($){function Tokenizer(decorated,$element,options){var tokenizer=options.get("tokenizer");void 0!==tokenizer&&(this.tokenizer=tokenizer),decorated.call(this,$element,options)}return Tokenizer.prototype.bind=function(decorated,container,$container){decorated.call(this,container,$container),this.$search=container.dropdown.$search||container.selection.$search||$container.find(".select2-search__field")},Tokenizer.prototype.query=function(decorated,params,callback){var self=this;params.term=params.term||"";var tokenData=this.tokenizer(params,this.options,function(data){var item=self._normalizeItem(data);if(!self.$element.find("option").filter(function(){return $(this).val()===item.id}).length){var $option=self.option(item);$option.attr("data-select2-tag",!0),self._removeOldTags(),self.addOptions([$option])}!function(data){self.trigger("select",{data:data})}(item)});tokenData.term!==params.term&&(this.$search.length&&(this.$search.val(tokenData.term),this.$search.focus()),params.term=tokenData.term),decorated.call(this,params,callback)},Tokenizer.prototype.tokenizer=function(_,params,options,callback){for(var separators=options.get("tokenSeparators")||[],term=params.term,i=0,createTag=this.createTag||function(params){return{id:params.term,text:params.term}};i<term.length;){var termChar=term[i];if(-1!==$.inArray(termChar,separators)){var part=term.substr(0,i),data=createTag($.extend({},params,{term:part}));null!=data?(callback(data),term=term.substr(i+1)||"",i=0):i++}else i++}return{term:term}},Tokenizer}),S2.define("select2/data/minimumInputLength",[],function(){function MinimumInputLength(decorated,$e,options){this.minimumInputLength=options.get("minimumInputLength"),decorated.call(this,$e,options)}return MinimumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"",params.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:params.term,params:params}}):decorated.call(this,params,callback)},MinimumInputLength}),S2.define("select2/data/maximumInputLength",[],function(){function MaximumInputLength(decorated,$e,options){this.maximumInputLength=options.get("maximumInputLength"),decorated.call(this,$e,options)}return MaximumInputLength.prototype.query=function(decorated,params,callback){params.term=params.term||"",0<this.maximumInputLength&&params.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:params.term,params:params}}):decorated.call(this,params,callback)},MaximumInputLength}),S2.define("select2/data/maximumSelectionLength",[],function(){function MaximumSelectionLength(decorated,$e,options){this.maximumSelectionLength=options.get("maximumSelectionLength"),decorated.call(this,$e,options)}return MaximumSelectionLength.prototype.query=function(decorated,params,callback){var self=this;this.current(function(currentData){var count=null!=currentData?currentData.length:0;0<self.maximumSelectionLength&&count>=self.maximumSelectionLength?self.trigger("results:message",{message:"maximumSelected",args:{maximum:self.maximumSelectionLength}}):decorated.call(self,params,callback)})},MaximumSelectionLength}),S2.define("select2/dropdown",["jquery","./utils"],function($,Utils){function Dropdown($element,options){this.$element=$element,this.options=options,Dropdown.__super__.constructor.call(this)}return Utils.Extend(Dropdown,Utils.Observable),Dropdown.prototype.render=function(){var $dropdown=$('<span class="select2-dropdown"><span class="select2-results"></span></span>');return $dropdown.attr("dir",this.options.get("dir")),this.$dropdown=$dropdown},Dropdown.prototype.bind=function(){},Dropdown.prototype.position=function($dropdown,$container){},Dropdown.prototype.destroy=function(){this.$dropdown.remove()},Dropdown}),S2.define("select2/dropdown/search",["jquery","../utils"],function($,Utils){function Search(){}return Search.prototype.render=function(decorated){var $rendered=decorated.call(this),$search=$('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=$search,this.$search=$search.find("input"),$rendered.prepend($search),$rendered},Search.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),this.$search.on("keydown",function(evt){self.trigger("keypress",evt),self._keyUpPrevented=evt.isDefaultPrevented()}),this.$search.on("input",function(evt){$(this).off("keyup")}),this.$search.on("keyup input",function(evt){self.handleSearch(evt)}),container.on("open",function(){self.$search.attr("tabindex",0),self.$search.focus(),window.setTimeout(function(){self.$search.focus()},0)}),container.on("close",function(){self.$search.attr("tabindex",-1),self.$search.val("")}),container.on("focus",function(){container.isOpen()&&self.$search.focus()}),container.on("results:all",function(params){null!=params.query.term&&""!==params.query.term||(self.showSearch(params)?self.$searchContainer.removeClass("select2-search--hide"):self.$searchContainer.addClass("select2-search--hide"))})},Search.prototype.handleSearch=function(evt){if(!this._keyUpPrevented){var input=this.$search.val();this.trigger("query",{term:input})}this._keyUpPrevented=!1},Search.prototype.showSearch=function(_,params){return!0},Search}),S2.define("select2/dropdown/hidePlaceholder",[],function(){function HidePlaceholder(decorated,$element,options,dataAdapter){this.placeholder=this.normalizePlaceholder(options.get("placeholder")),decorated.call(this,$element,options,dataAdapter)}return HidePlaceholder.prototype.append=function(decorated,data){data.results=this.removePlaceholder(data.results),decorated.call(this,data)},HidePlaceholder.prototype.normalizePlaceholder=function(_,placeholder){return"string"==typeof placeholder&&(placeholder={id:"",text:placeholder}),placeholder},HidePlaceholder.prototype.removePlaceholder=function(_,data){for(var modifiedData=data.slice(0),d=data.length-1;0<=d;d--){var item=data[d];this.placeholder.id===item.id&&modifiedData.splice(d,1)}return modifiedData},HidePlaceholder}),S2.define("select2/dropdown/infiniteScroll",["jquery"],function($){function InfiniteScroll(decorated,$element,options,dataAdapter){this.lastParams={},decorated.call(this,$element,options,dataAdapter),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return InfiniteScroll.prototype.append=function(decorated,data){this.$loadingMore.remove(),this.loading=!1,decorated.call(this,data),this.showLoadingMore(data)&&this.$results.append(this.$loadingMore)},InfiniteScroll.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("query",function(params){self.lastParams=params,self.loading=!0}),container.on("query:append",function(params){self.lastParams=params,self.loading=!0}),this.$results.on("scroll",function(){var isLoadMoreVisible=$.contains(document.documentElement,self.$loadingMore[0]);if(!self.loading&&isLoadMoreVisible){var currentOffset=self.$results.offset().top+self.$results.outerHeight(!1);self.$loadingMore.offset().top+self.$loadingMore.outerHeight(!1)<=currentOffset+50&&self.loadMore()}})},InfiniteScroll.prototype.loadMore=function(){this.loading=!0;var params=$.extend({},{page:1},this.lastParams);params.page++,this.trigger("query:append",params)},InfiniteScroll.prototype.showLoadingMore=function(_,data){return data.pagination&&data.pagination.more},InfiniteScroll.prototype.createLoadingMore=function(){var $option=$('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),message=this.options.get("translations").get("loadingMore");return $option.html(message(this.lastParams)),$option},InfiniteScroll}),S2.define("select2/dropdown/attachBody",["jquery","../utils"],function($,Utils){function AttachBody(decorated,$element,options){this.$dropdownParent=options.get("dropdownParent")||$(document.body),decorated.call(this,$element,options)}return AttachBody.prototype.bind=function(decorated,container,$container){var self=this,setupResultsEvents=!1;decorated.call(this,container,$container),container.on("open",function(){self._showDropdown(),self._attachPositioningHandler(container),setupResultsEvents||(setupResultsEvents=!0,container.on("results:all",function(){self._positionDropdown(),self._resizeDropdown()}),container.on("results:append",function(){self._positionDropdown(),self._resizeDropdown()}))}),container.on("close",function(){self._hideDropdown(),self._detachPositioningHandler(container)}),this.$dropdownContainer.on("mousedown",function(evt){evt.stopPropagation()})},AttachBody.prototype.destroy=function(decorated){decorated.call(this),this.$dropdownContainer.remove()},AttachBody.prototype.position=function(decorated,$dropdown,$container){$dropdown.attr("class",$container.attr("class")),$dropdown.removeClass("select2"),$dropdown.addClass("select2-container--open"),$dropdown.css({position:"absolute",top:-999999}),this.$container=$container},AttachBody.prototype.render=function(decorated){var $container=$("<span></span>"),$dropdown=decorated.call(this);return $container.append($dropdown),this.$dropdownContainer=$container},AttachBody.prototype._hideDropdown=function(decorated){this.$dropdownContainer.detach()},AttachBody.prototype._attachPositioningHandler=function(decorated,container){var self=this,scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id,$watchers=this.$container.parents().filter(Utils.hasScroll);$watchers.each(function(){$(this).data("select2-scroll-position",{x:$(this).scrollLeft(),y:$(this).scrollTop()})}),$watchers.on(scrollEvent,function(ev){var position=$(this).data("select2-scroll-position");$(this).scrollTop(position.y)}),$(window).on(scrollEvent+" "+resizeEvent+" "+orientationEvent,function(e){self._positionDropdown(),self._resizeDropdown()})},AttachBody.prototype._detachPositioningHandler=function(decorated,container){var scrollEvent="scroll.select2."+container.id,resizeEvent="resize.select2."+container.id,orientationEvent="orientationchange.select2."+container.id;this.$container.parents().filter(Utils.hasScroll).off(scrollEvent),$(window).off(scrollEvent+" "+resizeEvent+" "+orientationEvent)},AttachBody.prototype._positionDropdown=function(){var $window=$(window),isCurrentlyAbove=this.$dropdown.hasClass("select2-dropdown--above"),isCurrentlyBelow=this.$dropdown.hasClass("select2-dropdown--below"),newDirection=null,offset=this.$container.offset();offset.bottom=offset.top+this.$container.outerHeight(!1);var container={height:this.$container.outerHeight(!1)};container.top=offset.top,container.bottom=offset.top+container.height;var dropdown_height=this.$dropdown.outerHeight(!1),viewport_top=$window.scrollTop(),viewport_bottom=$window.scrollTop()+$window.height(),enoughRoomAbove=viewport_top<offset.top-dropdown_height,enoughRoomBelow=viewport_bottom>offset.bottom+dropdown_height,css={left:offset.left,top:container.bottom},$offsetParent=this.$dropdownParent;"static"===$offsetParent.css("position")&&($offsetParent=$offsetParent.offsetParent());var parentOffset=$offsetParent.offset();css.top-=parentOffset.top,css.left-=parentOffset.left,isCurrentlyAbove||isCurrentlyBelow||(newDirection="below"),enoughRoomBelow||!enoughRoomAbove||isCurrentlyAbove?!enoughRoomAbove&&enoughRoomBelow&&isCurrentlyAbove&&(newDirection="below"):newDirection="above",("above"==newDirection||isCurrentlyAbove&&"below"!==newDirection)&&(css.top=container.top-parentOffset.top-dropdown_height),null!=newDirection&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+newDirection),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+newDirection)),this.$dropdownContainer.css(css)},AttachBody.prototype._resizeDropdown=function(){var css={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(css.minWidth=css.width,css.position="relative",css.width="auto"),this.$dropdown.css(css)},AttachBody.prototype._showDropdown=function(decorated){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},AttachBody}),S2.define("select2/dropdown/minimumResultsForSearch",[],function(){function MinimumResultsForSearch(decorated,$element,options,dataAdapter){this.minimumResultsForSearch=options.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),decorated.call(this,$element,options,dataAdapter)}return MinimumResultsForSearch.prototype.showSearch=function(decorated,params){return!(function countResults(data){for(var count=0,d=0;d<data.length;d++){var item=data[d];item.children?count+=countResults(item.children):count++}return count}(params.data.results)<this.minimumResultsForSearch)&&decorated.call(this,params)},MinimumResultsForSearch}),S2.define("select2/dropdown/selectOnClose",[],function(){function SelectOnClose(){}return SelectOnClose.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("close",function(params){self._handleSelectOnClose(params)})},SelectOnClose.prototype._handleSelectOnClose=function(_,params){if(params&&null!=params.originalSelect2Event){var event=params.originalSelect2Event;if("select"===event._type||"unselect"===event._type)return}var $highlightedResults=this.getHighlightedResults();if(!($highlightedResults.length<1)){var data=$highlightedResults.data("data");null!=data.element&&data.element.selected||null==data.element&&data.selected||this.trigger("select",{data:data})}},SelectOnClose}),S2.define("select2/dropdown/closeOnSelect",[],function(){function CloseOnSelect(){}return CloseOnSelect.prototype.bind=function(decorated,container,$container){var self=this;decorated.call(this,container,$container),container.on("select",function(evt){self._selectTriggered(evt)}),container.on("unselect",function(evt){self._selectTriggered(evt)})},CloseOnSelect.prototype._selectTriggered=function(_,evt){var originalEvent=evt.originalEvent;originalEvent&&originalEvent.ctrlKey||this.trigger("close",{originalEvent:originalEvent,originalSelect2Event:evt})},CloseOnSelect}),S2.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(args){var overChars=args.input.length-args.maximum,message="Please delete "+overChars+" character";return 1!=overChars&&(message+="s"),message},inputTooShort:function(args){return"Please enter "+(args.minimum-args.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(args){var message="You can only select "+args.maximum+" item";return 1!=args.maximum&&(message+="s"),message},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),S2.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function($,require,ResultsList,SingleSelection,MultipleSelection,Placeholder,AllowClear,SelectionSearch,EventRelay,Utils,Translation,DIACRITICS,SelectData,ArrayData,AjaxData,Tags,Tokenizer,MinimumInputLength,MaximumInputLength,MaximumSelectionLength,Dropdown,DropdownSearch,HidePlaceholder,InfiniteScroll,AttachBody,MinimumResultsForSearch,SelectOnClose,CloseOnSelect,EnglishTranslation){function Defaults(){this.reset()}return Defaults.prototype.apply=function(options){if(null==(options=$.extend(!0,{},this.defaults,options)).dataAdapter){if(null!=options.ajax?options.dataAdapter=AjaxData:null!=options.data?options.dataAdapter=ArrayData:options.dataAdapter=SelectData,0<options.minimumInputLength&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MinimumInputLength)),0<options.maximumInputLength&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumInputLength)),0<options.maximumSelectionLength&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,MaximumSelectionLength)),options.tags&&(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tags)),null==options.tokenSeparators&&null==options.tokenizer||(options.dataAdapter=Utils.Decorate(options.dataAdapter,Tokenizer)),null!=options.query){var Query=require(options.amdBase+"compat/query");options.dataAdapter=Utils.Decorate(options.dataAdapter,Query)}if(null!=options.initSelection){var InitSelection=require(options.amdBase+"compat/initSelection");options.dataAdapter=Utils.Decorate(options.dataAdapter,InitSelection)}}if(null==options.resultsAdapter&&(options.resultsAdapter=ResultsList,null!=options.ajax&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,InfiniteScroll)),null!=options.placeholder&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,HidePlaceholder)),options.selectOnClose&&(options.resultsAdapter=Utils.Decorate(options.resultsAdapter,SelectOnClose))),null==options.dropdownAdapter){if(options.multiple)options.dropdownAdapter=Dropdown;else{var SearchableDropdown=Utils.Decorate(Dropdown,DropdownSearch);options.dropdownAdapter=SearchableDropdown}if(0!==options.minimumResultsForSearch&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,MinimumResultsForSearch)),options.closeOnSelect&&(options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,CloseOnSelect)),null!=options.dropdownCssClass||null!=options.dropdownCss||null!=options.adaptDropdownCssClass){var DropdownCSS=require(options.amdBase+"compat/dropdownCss");options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,DropdownCSS)}options.dropdownAdapter=Utils.Decorate(options.dropdownAdapter,AttachBody)}if(null==options.selectionAdapter){if(options.multiple?options.selectionAdapter=MultipleSelection:options.selectionAdapter=SingleSelection,null!=options.placeholder&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,Placeholder)),options.allowClear&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,AllowClear)),options.multiple&&(options.selectionAdapter=Utils.Decorate(options.selectionAdapter,SelectionSearch)),null!=options.containerCssClass||null!=options.containerCss||null!=options.adaptContainerCssClass){var ContainerCSS=require(options.amdBase+"compat/containerCss");options.selectionAdapter=Utils.Decorate(options.selectionAdapter,ContainerCSS)}options.selectionAdapter=Utils.Decorate(options.selectionAdapter,EventRelay)}if("string"==typeof options.language)if(0<options.language.indexOf("-")){var baseLanguage=options.language.split("-")[0];options.language=[options.language,baseLanguage]}else options.language=[options.language];if($.isArray(options.language)){var languages=new Translation;options.language.push("en");for(var languageNames=options.language,l=0;l<languageNames.length;l++){var name=languageNames[l],language={};try{language=Translation.loadPath(name)}catch(e){try{name=this.defaults.amdLanguageBase+name,language=Translation.loadPath(name)}catch(ex){options.debug&&window.console&&console.warn;continue}}languages.extend(language)}options.translations=languages}else{var baseTranslation=Translation.loadPath(this.defaults.amdLanguageBase+"en"),customTranslation=new Translation(options.language);customTranslation.extend(baseTranslation),options.translations=customTranslation}return options},Defaults.prototype.reset=function(){function stripDiacritics(text){return text.replace(/[^\u0000-\u007E]/g,function(a){return DIACRITICS[a]||a})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:Utils.escapeMarkup,language:EnglishTranslation,matcher:function matcher(params,data){if(""===$.trim(params.term))return data;if(data.children&&0<data.children.length){for(var match=$.extend(!0,{},data),c=data.children.length-1;0<=c;c--)null==matcher(params,data.children[c])&&match.children.splice(c,1);return 0<match.children.length?match:matcher(params,match)}var original=stripDiacritics(data.text).toUpperCase(),term=stripDiacritics(params.term).toUpperCase();return-1<original.indexOf(term)?data:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(data){return data},templateResult:function(result){return result.text},templateSelection:function(selection){return selection.text},theme:"default",width:"resolve"}},Defaults.prototype.set=function(key,value){var data={};data[$.camelCase(key)]=value;var convertedData=Utils._convertData(data);$.extend(this.defaults,convertedData)},new Defaults}),S2.define("select2/options",["require","jquery","./defaults","./utils"],function(require,$,Defaults,Utils){function Options(options,$element){if(this.options=options,null!=$element&&this.fromElement($element),this.options=Defaults.apply(this.options),$element&&$element.is("input")){var InputCompat=require(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=Utils.Decorate(this.options.dataAdapter,InputCompat)}}return Options.prototype.fromElement=function($e){var excludedData=["select2"];null==this.options.multiple&&(this.options.multiple=$e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=$e.prop("disabled")),null==this.options.language&&($e.prop("lang")?this.options.language=$e.prop("lang").toLowerCase():$e.closest("[lang]").prop("lang")&&(this.options.language=$e.closest("[lang]").prop("lang"))),null==this.options.dir&&($e.prop("dir")?this.options.dir=$e.prop("dir"):$e.closest("[dir]").prop("dir")?this.options.dir=$e.closest("[dir]").prop("dir"):this.options.dir="ltr"),$e.prop("disabled",this.options.disabled),$e.prop("multiple",this.options.multiple),$e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn,$e.data("data",$e.data("select2Tags")),$e.data("tags",!0)),$e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn,$e.attr("ajax--url",$e.data("ajaxUrl")),$e.data("ajax--url",$e.data("ajaxUrl")));var dataset={};dataset=$.fn.jquery&&"1."==$.fn.jquery.substr(0,2)&&$e[0].dataset?$.extend(!0,{},$e[0].dataset,$e.data()):$e.data();var data=$.extend(!0,{},dataset);for(var key in data=Utils._convertData(data))-1<$.inArray(key,excludedData)||($.isPlainObject(this.options[key])?$.extend(this.options[key],data[key]):this.options[key]=data[key]);return this},Options.prototype.get=function(key){return this.options[key]},Options.prototype.set=function(key,val){this.options[key]=val},Options}),S2.define("select2/core",["jquery","./options","./utils","./keys"],function($,Options,Utils,KEYS){var Select2=function($element,options){null!=$element.data("select2")&&$element.data("select2").destroy(),this.$element=$element,this.id=this._generateId($element),options=options||{},this.options=new Options(options,$element),Select2.__super__.constructor.call(this);var tabindex=$element.attr("tabindex")||0;$element.data("old-tabindex",tabindex),$element.attr("tabindex","-1");var DataAdapter=this.options.get("dataAdapter");this.dataAdapter=new DataAdapter($element,this.options);var $container=this.render();this._placeContainer($container);var SelectionAdapter=this.options.get("selectionAdapter");this.selection=new SelectionAdapter($element,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,$container);var DropdownAdapter=this.options.get("dropdownAdapter");this.dropdown=new DropdownAdapter($element,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,$container);var ResultsAdapter=this.options.get("resultsAdapter");this.results=new ResultsAdapter($element,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var self=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(initialData){self.trigger("selection:update",{data:initialData})}),$element.addClass("select2-hidden-accessible"),$element.attr("aria-hidden","true"),this._syncAttributes(),$element.data("select2",this)};return Utils.Extend(Select2,Utils.Observable),Select2.prototype._generateId=function($element){return"select2-"+(null!=$element.attr("id")?$element.attr("id"):null!=$element.attr("name")?$element.attr("name")+"-"+Utils.generateChars(2):Utils.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},Select2.prototype._placeContainer=function($container){$container.insertAfter(this.$element);var width=this._resolveWidth(this.$element,this.options.get("width"));null!=width&&$container.css("width",width)},Select2.prototype._resolveWidth=function($element,method){var WIDTH=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==method){var styleWidth=this._resolveWidth($element,"style");return null!=styleWidth?styleWidth:this._resolveWidth($element,"element")}if("element"==method){var elementWidth=$element.outerWidth(!1);return elementWidth<=0?"auto":elementWidth+"px"}if("style"==method){var style=$element.attr("style");if("string"!=typeof style)return null;for(var attrs=style.split(";"),i=0,l=attrs.length;i<l;i+=1){var matches=attrs[i].replace(/\s/g,"").match(WIDTH);if(null!==matches&&1<=matches.length)return matches[1]}return null}return method},Select2.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},Select2.prototype._registerDomEvents=function(){var self=this;this.$element.on("change.select2",function(){self.dataAdapter.current(function(data){self.trigger("selection:update",{data:data})})}),this.$element.on("focus.select2",function(evt){self.trigger("focus",evt)}),this._syncA=Utils.bind(this._syncAttributes,this),this._syncS=Utils.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=observer?(this._observer=new observer(function(mutations){$.each(mutations,self._syncA),$.each(mutations,self._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",self._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",self._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",self._syncS,!1))},Select2.prototype._registerDataEvents=function(){var self=this;this.dataAdapter.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerSelectionEvents=function(){var self=this,nonRelayEvents=["toggle","focus"];this.selection.on("toggle",function(){self.toggleDropdown()}),this.selection.on("focus",function(params){self.focus(params)}),this.selection.on("*",function(name,params){-1===$.inArray(name,nonRelayEvents)&&self.trigger(name,params)})},Select2.prototype._registerDropdownEvents=function(){var self=this;this.dropdown.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerResultsEvents=function(){var self=this;this.results.on("*",function(name,params){self.trigger(name,params)})},Select2.prototype._registerEvents=function(){var self=this;this.on("open",function(){self.$container.addClass("select2-container--open")}),this.on("close",function(){self.$container.removeClass("select2-container--open")}),this.on("enable",function(){self.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){self.$container.addClass("select2-container--disabled")}),this.on("blur",function(){self.$container.removeClass("select2-container--focus")}),this.on("query",function(params){self.isOpen()||self.trigger("open",{}),this.dataAdapter.query(params,function(data){self.trigger("results:all",{data:data,query:params})})}),this.on("query:append",function(params){this.dataAdapter.query(params,function(data){self.trigger("results:append",{data:data,query:params})})}),this.on("keypress",function(evt){var key=evt.which;self.isOpen()?key===KEYS.ESC||key===KEYS.TAB||key===KEYS.UP&&evt.altKey?(self.close(),evt.preventDefault()):key===KEYS.ENTER?(self.trigger("results:select",{}),evt.preventDefault()):key===KEYS.SPACE&&evt.ctrlKey?(self.trigger("results:toggle",{}),evt.preventDefault()):key===KEYS.UP?(self.trigger("results:previous",{}),evt.preventDefault()):key===KEYS.DOWN&&(self.trigger("results:next",{}),evt.preventDefault()):(key===KEYS.ENTER||key===KEYS.SPACE||key===KEYS.DOWN&&evt.altKey)&&(self.open(),evt.preventDefault())})},Select2.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},Select2.prototype._syncSubtree=function(evt,mutations){var changed=!1,self=this;if(!evt||!evt.target||"OPTION"===evt.target.nodeName||"OPTGROUP"===evt.target.nodeName){if(mutations)if(mutations.addedNodes&&0<mutations.addedNodes.length)for(var n=0;n<mutations.addedNodes.length;n++){mutations.addedNodes[n].selected&&(changed=!0)}else mutations.removedNodes&&0<mutations.removedNodes.length&&(changed=!0);else changed=!0;changed&&this.dataAdapter.current(function(currentData){self.trigger("selection:update",{data:currentData})})}},Select2.prototype.trigger=function(name,args){var actualTrigger=Select2.__super__.trigger,preTriggerMap={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===args&&(args={}),name in preTriggerMap){var preTriggerName=preTriggerMap[name],preTriggerArgs={prevented:!1,name:name,args:args};if(actualTrigger.call(this,preTriggerName,preTriggerArgs),preTriggerArgs.prevented)return void(args.prevented=!0)}actualTrigger.call(this,name,args)},Select2.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},Select2.prototype.open=function(){this.isOpen()||this.trigger("query",{})},Select2.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},Select2.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},Select2.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},Select2.prototype.focus=function(data){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},Select2.prototype.enable=function(args){this.options.get("debug")&&window.console&&console.warn,null!=args&&0!==args.length||(args=[!0]);var disabled=!args[0];this.$element.prop("disabled",disabled)},Select2.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn;var data=[];return this.dataAdapter.current(function(currentData){data=currentData}),data},Select2.prototype.val=function(args){if(this.options.get("debug")&&window.console&&console.warn,null==args||0===args.length)return this.$element.val();var newVal=args[0];$.isArray(newVal)&&(newVal=$.map(newVal,function(obj){return obj.toString()})),this.$element.val(newVal).trigger("change")},Select2.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},Select2.prototype.render=function(){var $container=$('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return $container.attr("dir",this.options.get("dir")),this.$container=$container,this.$container.addClass("select2-container--"+this.options.get("theme")),$container.data("element",this.$element),$container},Select2}),S2.define("jquery-mousewheel",["jquery"],function($){return $}),S2.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function($,_,Select2,Defaults){if(null==$.fn.select2){var thisMethods=["open","close","destroy"];$.fn.select2=function(options){if("object"==typeof(options=options||{}))return this.each(function(){var instanceOptions=$.extend(!0,{},options);new Select2($(this),instanceOptions)}),this;if("string"==typeof options){var ret,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var instance=$(this).data("select2");null==instance&&window.console&&console.error,ret=instance[options].apply(instance,args)}),-1<$.inArray(options,thisMethods)?this:ret}throw new Error("Invalid arguments for Select2: "+options)}}return null==$.fn.select2.defaults&&($.fn.select2.defaults=Defaults),Select2}),{define:S2.define,require:S2.require}}(),select2=S2.require("jquery.select2");return jQuery.fn.select2.amd=S2,select2}),$(function(){search_filled(),dropdown_init(),tabs_init(),masonry_init(),objectFitImages("img"),wizard_validation_init(),upload_init(),select_init(),input_date_placeholder()});